function c(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function s(e,t){const n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);const r=c(n);return(a,i)=>r.then(d=>i(d.transaction(t,a).objectStore(t)))}let o;function u(){return o||(o=s("keyval-store","keyval")),o}function f(e,t=u()){return t("readonly",n=>c(n.get(e)))}function l(e,t,n=u()){return n("readwrite",r=>(r.put(t,e),c(r.transaction)))}export{f as g,l as s};
