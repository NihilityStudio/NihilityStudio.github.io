import{S as Il,i as Vl,s as Sl,P as K,l as h,a as F,r as Y,w as Fe,m as _,n as m,c as j,h as f,u as Z,x as je,p as c,q as fe,a5 as Ue,b as he,J as s,y as Be,K as R,a1 as Ml,Z as Bl,g as Cl,a6 as Nl,a8 as Ll,d as Pl,f as ue,t as de,L as Oe,B as Ne,_ as Tl,Y as Ul,M as Ol,v as ql,E as cl,W as zl}from"./index-70a5fc52.js";import{T as Al}from"./TitleBar-5f961d1e.js";import"./lodash-b0811ec1.js";import{h as Kl,o as Rl,u as Hl,l as ul,n as Jl,j as Wl,m as Yl,b as Zl}from"./store-59feb90e.js";import{t as Gl,a as Ql,b as Xl}from"./finder-52261c48.js";import{u as $l}from"./utils-1f7a3290.js";import"./fs-f48425c2.js";import{B as dl}from"./Button-e8580b92.js";import{P as et}from"./Previewable-7057b01c.js";import"./_commonjsHelpers-cea7ac1a.js";import"./index-f053a494.js";import"./index-355ed6be.js";/* empty css                                             */function fl(t,e,l){const i=t.slice();return i[31]=e[l],i}function hl(t,e,l){const i=t.slice();return i[31]=e[l],i}function _l(t,e,l){const i=t.slice();return i[31]=e[l],i}function pl(t,e,l){const i=t.slice();return i[31]=e[l],i}function lt(t){let e,l;return{c(){e=h("div"),this.h()},l(i){e=_(i,"DIV",{class:!0});var r=m(e);r.forEach(f),this.h()},h(){c(e,"class",l="w-[30px] h-[30px] shrink-0 bg-contain bg-no-repeat "+(t[31].type=="folder"?"bg-[url(/images/xp/icons/FolderClosed.png)]":"bg-[url(/images/xp/icons/Default.png)]")),fe(e,"background-image",t[20](t[31]),!1)},m(i,r){he(i,e,r)},p(i,r){r[0]&1024&&l!==(l="w-[30px] h-[30px] shrink-0 bg-contain bg-no-repeat "+(i[31].type=="folder"?"bg-[url(/images/xp/icons/FolderClosed.png)]":"bg-[url(/images/xp/icons/Default.png)]"))&&c(e,"class",l),r[0]&1024&&fe(e,"background-image",i[20](i[31]),!1)},i:cl,o:cl,d(i){i&&f(e)}}}function tt(t){let e,l;return e=new et({props:{size:30,default_icon:t[20](t[31]),fs_id:t[31].id}}),{c(){Fe(e.$$.fragment)},l(i){je(e.$$.fragment,i)},m(i,r){Be(e,i,r),l=!0},p(i,r){const o={};r[0]&1024&&(o.default_icon=i[20](i[31])),r[0]&1024&&(o.fs_id=i[31].id),e.$set(o)},i(i){l||(ue(e.$$.fragment,i),l=!0)},o(i){de(e.$$.fragment,i),l=!1},d(i){Ne(e,i)}}}function gl(t,e){let l,i,r,o,k,p,v=e[31].name+"",D,E,d,b,y,M,N,I;const H=[tt,lt],C=[];function V(u,w){return w[0]&1024&&(i=null),i==null&&(i=!!Jl.includes(u[31].ext)),i?0:1}r=V(e,[-1,-1]),o=C[r]=H[r](e);function ne(){return e[23](e[31])}function S(...u){return e[24](e[31],...u)}return{key:t,first:null,c(){l=h("div"),o.c(),k=F(),p=h("p"),D=Y(v),d=F(),this.h()},l(u){l=_(u,"DIV",{"fs-id":!0,class:!0});var w=m(l);o.l(w),k=j(w),p=_(w,"P",{class:!0});var P=m(p);D=Z(P,v),P.forEach(f),d=j(w),w.forEach(f),this.h()},h(){var u;c(p,"class",E="px-1 text-[11px] break-words line-clamp-2 text-ellipsis leading-tight "+((u=e[1])!=null&&u.includes(e[31].id)?"bg-blue-600 text-slate-50":"")),c(l,"fs-id",b=e[31].id),c(l,"class",y="w-[100px] overflow-hidden m-2 inline-flex flex-row items-center font-MSSS relative "+(e[16](e[31])?"":"opacity-50")),this.first=l},m(u,w){he(u,l,w),C[r].m(l,null),s(l,k),s(l,p),s(p,D),s(l,d),M=!0,N||(I=[R(l,"dblclick",ne),R(l,"click",S)],N=!0)},p(u,w){var U;e=u;let P=r;r=V(e,w),r===P?C[r].p(e,w):(Cl(),de(C[P],1,1,()=>{C[P]=null}),Pl(),o=C[r],o?o.p(e,w):(o=C[r]=H[r](e),o.c()),ue(o,1),o.m(l,k)),(!M||w[0]&1024)&&v!==(v=e[31].name+"")&&ql(D,v),(!M||w[0]&1026&&E!==(E="px-1 text-[11px] break-words line-clamp-2 text-ellipsis leading-tight "+((U=e[1])!=null&&U.includes(e[31].id)?"bg-blue-600 text-slate-50":"")))&&c(p,"class",E),(!M||w[0]&1024&&b!==(b=e[31].id))&&c(l,"fs-id",b),(!M||w[0]&1024&&y!==(y="w-[100px] overflow-hidden m-2 inline-flex flex-row items-center font-MSSS relative "+(e[16](e[31])?"":"opacity-50")))&&c(l,"class",y)},i(u){M||(ue(o),M=!0)},o(u){de(o),M=!1},d(u){u&&f(l),C[r].d(),N=!1,Tl(I)}}}function ml(t){let e,l,i,r,o=(t[31].display_name!=null?t[31].display_name:t[31].name)+"",k,p,v;function D(){return t[25](t[31])}return{c(){e=h("div"),l=h("div"),i=F(),r=h("div"),k=Y(o),this.h()},l(E){e=_(E,"DIV",{class:!0});var d=m(e);l=_(d,"DIV",{class:!0});var b=m(l);b.forEach(f),i=j(d),r=_(d,"DIV",{class:!0});var y=m(r);k=Z(y,o),y.forEach(f),d.forEach(f),this.h()},h(){c(l,"class","w-[40px] h-[40px] shrink-0 bg-[url(/images/xp/icons/FolderClosed.png)] bg-contain"),fe(l,"background-image",t[31].icon==null?"":`url(${t[31].icon})`,!1),c(r,"class","px-1 text-[11px] line-clamp-2 text-ellipsis leading-tight"),c(e,"class","w-[150px] ml-4 mr-8 overflow-hidden inline-flex flex-row items-center font-MSSS")},m(E,d){he(E,e,d),s(e,l),s(e,i),s(e,r),s(r,k),p||(v=R(e,"dblclick",D),p=!0)},p(E,d){t=E},d(E){E&&f(e),p=!1,v()}}}function vl(t){let e,l,i,r,o=(t[31].display_name!=null?t[31].display_name:t[31].name)+"",k,p,v;function D(){return t[26](t[31])}return{c(){e=h("div"),l=h("div"),i=F(),r=h("div"),k=Y(o),this.h()},l(E){e=_(E,"DIV",{class:!0});var d=m(e);l=_(d,"DIV",{class:!0});var b=m(l);b.forEach(f),i=j(d),r=_(d,"DIV",{class:!0});var y=m(r);k=Z(y,o),y.forEach(f),d.forEach(f),this.h()},h(){c(l,"class","w-[50px] h-[50px] shrink-0 bg-[url(/images/xp/icons/LocalDisk.png)] bg-contain"),c(r,"class","px-1 text-[11px] line-clamp-2 text-ellipsis leading-tight"),c(e,"class","w-[150px] ml-4 mr-8 overflow-hidden inline-flex flex-row items-center font-MSSS")},m(E,d){he(E,e,d),s(e,l),s(e,i),s(e,r),s(r,k),p||(v=R(e,"dblclick",D),p=!0)},p(E,d){t=E},d(E){E&&f(e),p=!1,v()}}}function bl(t){let e,l,i,r,o=(t[31].display_name!=null?t[31].display_name:t[31].name)+"",k,p,v,D;function E(){return t[27](t[31])}return{c(){e=h("div"),l=h("div"),i=F(),r=h("div"),k=Y(o),p=F(),this.h()},l(d){e=_(d,"DIV",{class:!0});var b=m(e);l=_(b,"DIV",{class:!0});var y=m(l);y.forEach(f),i=j(b),r=_(b,"DIV",{class:!0});var M=m(r);k=Z(M,o),M.forEach(f),p=j(b),b.forEach(f),this.h()},h(){c(l,"class","w-[50px] h-[50px] shrink-0 bg-[url(/images/xp/icons/RemovableMedia.png)] bg-contain"),c(r,"class","px-1 text-[11px] line-clamp-2 text-ellipsis leading-tight"),c(e,"class","w-[150px] ml-4 mr-8 overflow-hidden inline-flex flex-row items-center font-MSSS")},m(d,b){he(d,e,b),s(e,l),s(e,i),s(e,r),s(r,k),s(e,p),v||(D=R(e,"dblclick",E),v=!0)},p(d,b){t=d},d(d){d&&f(e),v=!1,D()}}}function st(t){let e,l,i,r,o,k,p,v,D,E,d,b,y,M,N,I,H,C,V=[],ne=new Map,S,u,w,P,U,G,re,ee,J,le,Ve,_e,a,B,te,Se,qe,Me,ze,Ae,ae,Q,ge,Ke,Re,me,se,Ce,He,ve,oe,Je,X,be,We,Ye,ke,ie,Pe,Ze,we,ce,W,Ge,Qe,Te=t[10];const Xe=n=>n[31].id;for(let n=0;n<Te.length;n+=1){let g=pl(t,Te,n),T=Xe(g);ne.set(T,V[n]=gl(T,g))}let ye=t[13].filter(kl),O=[];for(let n=0;n<ye.length;n+=1)O[n]=ml(_l(t,ye,n));let xe=t[13].filter(wl),q=[];for(let n=0;n<xe.length;n+=1)q[n]=vl(hl(t,xe,n));let De=t[13].filter(yl),z=[];for(let n=0;n<De.length;n+=1)z[n]=bl(fl(t,De,n));return oe=new dl({props:{title:"Open",on_click:t[5],disabled:t[1].length==0}}),ce=new dl({props:{title:"Cancel",on_click:t[6]}}),{c(){e=h("div"),l=h("div"),i=h("div"),r=h("input"),o=F(),k=h("div"),v=F(),D=h("button"),d=F(),b=h("button"),M=F(),N=h("button"),H=F(),C=h("div");for(let n=0;n<V.length;n+=1)V[n].c();S=F(),u=h("div"),w=h("p"),P=Y("Files Stored on This Computer"),U=F(),G=h("div"),re=F();for(let n=0;n<O.length;n+=1)O[n].c();ee=F(),J=h("p"),le=Y("Hard Disk Drives"),Ve=F(),_e=h("div"),a=F();for(let n=0;n<q.length;n+=1)q[n].c();B=F(),te=h("p"),Se=Y("Devices with Removable Storage"),qe=F(),Me=h("div"),ze=F();for(let n=0;n<z.length;n+=1)z[n].c();Ae=F(),ae=h("div"),Q=h("div"),ge=h("div"),Ke=Y("File name:"),Re=F(),me=h("div"),se=h("input"),He=F(),ve=h("div"),Fe(oe.$$.fragment),Je=F(),X=h("div"),be=h("div"),We=Y("Files of type:"),Ye=F(),ke=h("div"),ie=h("input"),Ze=F(),we=h("div"),Fe(ce.$$.fragment),this.h()},l(n){e=_(n,"DIV",{class:!0});var g=m(e);l=_(g,"DIV",{class:!0});var T=m(l);i=_(T,"DIV",{class:!0});var pe=m(i);r=_(pe,"INPUT",{class:!0,type:!0}),o=j(pe),k=_(pe,"DIV",{class:!0});var x=m(k);x.forEach(f),pe.forEach(f),v=j(T),D=_(T,"BUTTON",{class:!0});var $=m(D);$.forEach(f),d=j(T),b=_(T,"BUTTON",{class:!0});var Fl=m(b);Fl.forEach(f),M=j(T),N=_(T,"BUTTON",{class:!0});var jl=m(N);jl.forEach(f),T.forEach(f),H=j(g),C=_(g,"DIV",{class:!0});var $e=m(C);for(let A=0;A<V.length;A+=1)V[A].l($e);$e.forEach(f),S=j(g),u=_(g,"DIV",{class:!0});var L=m(u);w=_(L,"P",{class:!0});var el=m(w);P=Z(el,"Files Stored on This Computer"),el.forEach(f),U=j(L),G=_(L,"DIV",{class:!0}),m(G).forEach(f),re=j(L);for(let A=0;A<O.length;A+=1)O[A].l(L);ee=j(L),J=_(L,"P",{class:!0});var ll=m(J);le=Z(ll,"Hard Disk Drives"),ll.forEach(f),Ve=j(L),_e=_(L,"DIV",{class:!0}),m(_e).forEach(f),a=j(L);for(let A=0;A<q.length;A+=1)q[A].l(L);B=j(L),te=_(L,"P",{class:!0});var tl=m(te);Se=Z(tl,"Devices with Removable Storage"),tl.forEach(f),qe=j(L),Me=_(L,"DIV",{class:!0}),m(Me).forEach(f),ze=j(L);for(let A=0;A<z.length;A+=1)z[A].l(L);L.forEach(f),Ae=j(g),ae=_(g,"DIV",{class:!0});var Le=m(ae);Q=_(Le,"DIV",{class:!0});var Ee=m(Q);ge=_(Ee,"DIV",{class:!0});var sl=m(ge);Ke=Z(sl,"File name:"),sl.forEach(f),Re=j(Ee),me=_(Ee,"DIV",{class:!0});var il=m(me);se=_(il,"INPUT",{type:!0,class:!0}),il.forEach(f),He=j(Ee),ve=_(Ee,"DIV",{class:!0});var nl=m(ve);je(oe.$$.fragment,nl),nl.forEach(f),Ee.forEach(f),Je=j(Le),X=_(Le,"DIV",{class:!0});var Ie=m(X);be=_(Ie,"DIV",{class:!0});var rl=m(be);We=Z(rl,"Files of type:"),rl.forEach(f),Ye=j(Ie),ke=_(Ie,"DIV",{class:!0});var al=m(ke);ie=_(al,"INPUT",{type:!0,class:!0}),al.forEach(f),Ze=j(Ie),we=_(Ie,"DIV",{class:!0});var ol=m(we);je(ce.$$.fragment,ol),ol.forEach(f),Ie.forEach(f),Le.forEach(f),g.forEach(f),this.h()},h(){c(r,"class","absolute inset-0 w-[300px] pl-7 border border-blue-300 outline-none"),c(r,"type","text"),r.value=t[11],c(k,"class",p="w-[17px] h-[17px] absolute top-[4px] left-[4px] bg-no-repeat "+(t[0]==null?"bg-[url(/images/xp/icons/MyComputer.png)]":"bg-[url(/images/xp/icons/FolderClosed.png)]")+" bg-contain"),fe(k,"background-image",t[20](t[9][t[0]]),!1),c(i,"class","h-full w-[300px] relative"),c(D,"class","mx-1.5 ml-4 w-4 h-4 bg-[url(/images/xp/icons/Back.png)] bg-contain disabled:grayscale"),D.disabled=E=t[8]==0,c(b,"class","mx-1.5 w-4 h-4 bg-[url(/images/xp/icons/Forward.png)] bg-contain disabled:grayscale"),b.disabled=y=t[8]==t[7].length-1,c(N,"class","mx-1.5 w-5 h-5 bg-[url(/images/xp/icons/Up.png)] bg-contain disabled:grayscale"),N.disabled=I=t[7][t[8]]==null,c(l,"class","h-6 mb-2 flex flex-row items-center text-[11px]"),c(C,"class","w-full bg-slate-50 grow border overflow-auto border-blue-300"),Ue(C,"hidden",t[0]==null),c(w,"class","ml-2 mt-0.5 font-MSSS text-black text-[11px] font-bold"),c(G,"class","mb-4 w-[300px] h-[2px] bg-gradient-to-r from-blue-500 to-slate-50"),c(J,"class","ml-2 mt-4 font-MSSS text-black text-[11px] font-bold"),c(_e,"class","mb-4 w-[300px] h-[2px] bg-gradient-to-r from-blue-500 to-slate-50"),c(te,"class","ml-2 mt-4 font-MSSS text-black text-[11px] font-bold"),c(Me,"class","mb-4 w-[300px] h-[2px] bg-gradient-to-r from-blue-500 to-slate-50"),c(u,"class","w-full bg-slate-50 grow border overflow-auto border-blue-300"),Ue(u,"hidden",t[0]!=null),c(ge,"class","w-[100px] shrink-0"),se.disabled=!0,c(se,"type","text"),se.value=Ce=t[1].map(t[28]).join(", "),c(se,"class","w-full h-6 text-[11px] outline-none border border-blue-300 disabled:bg-slate-50"),c(me,"class","grow"),c(ve,"class","w-[100px] shrink-0 flex flex-row justify-end "),c(Q,"class","w-full flex flex-row items-center my-2"),c(be,"class","w-[100px] shrink-0"),ie.disabled=!0,c(ie,"type","text"),ie.value=Pe=t[2]+" ("+t[3].join(", ")+")",c(ie,"class","w-full h-6 p-0.5 text-[11px] outline-none border border-blue-300 disabled:bg-slate-50"),c(ke,"class","grow"),c(we,"class","w-[100px] shrink-0 flex flex-row justify-end "),c(X,"class","w-full flex flex-row items-center my-2"),c(ae,"class","shrink-0 w-full h-[70px] text-[11px] text-black"),c(e,"class","absolute inset-0 overflow-auto bg-xp-yellow flex flex-col")},m(n,g){he(n,e,g),s(e,l),s(l,i),s(i,r),s(i,o),s(i,k),s(l,v),s(l,D),s(l,d),s(l,b),s(l,M),s(l,N),s(e,H),s(e,C);for(let T=0;T<V.length;T+=1)V[T].m(C,null);s(e,S),s(e,u),s(u,w),s(w,P),s(u,U),s(u,G),s(u,re);for(let T=0;T<O.length;T+=1)O[T].m(u,null);s(u,ee),s(u,J),s(J,le),s(u,Ve),s(u,_e),s(u,a);for(let T=0;T<q.length;T+=1)q[T].m(u,null);s(u,B),s(u,te),s(te,Se),s(u,qe),s(u,Me),s(u,ze);for(let T=0;T<z.length;T+=1)z[T].m(u,null);s(e,Ae),s(e,ae),s(ae,Q),s(Q,ge),s(ge,Ke),s(Q,Re),s(Q,me),s(me,se),s(Q,He),s(Q,ve),Be(oe,ve,null),s(ae,Je),s(ae,X),s(X,be),s(be,We),s(X,Ye),s(X,ke),s(ke,ie),s(X,Ze),s(X,we),Be(ce,we,null),W=!0,Ge||(Qe=[R(r,"click",it),R(r,"keyup",t[21]),R(D,"click",t[17]),R(b,"click",t[18]),R(N,"click",t[19]),R(C,"click",Ml(t[15])),Bl(t[12].call(null,e)),R(e,"click_outside",t[29])],Ge=!0)},p(n,g){if((!W||g[0]&2048&&r.value!==n[11])&&(r.value=n[11]),(!W||g[0]&1&&p!==(p="w-[17px] h-[17px] absolute top-[4px] left-[4px] bg-no-repeat "+(n[0]==null?"bg-[url(/images/xp/icons/MyComputer.png)]":"bg-[url(/images/xp/icons/FolderClosed.png)]")+" bg-contain"))&&c(k,"class",p),g[0]&513&&fe(k,"background-image",n[20](n[9][n[0]]),!1),(!W||g[0]&256&&E!==(E=n[8]==0))&&(D.disabled=E),(!W||g[0]&384&&y!==(y=n[8]==n[7].length-1))&&(b.disabled=y),(!W||g[0]&384&&I!==(I=n[7][n[8]]==null))&&(N.disabled=I),g[0]&1131538&&(Te=n[10],Cl(),V=Nl(V,g,Xe,1,n,Te,ne,C,Ll,gl,null,pl),Pl()),g[0]&1&&Ue(C,"hidden",n[0]==null),g[0]&8208){ye=n[13].filter(kl);let x;for(x=0;x<ye.length;x+=1){const $=_l(n,ye,x);O[x]?O[x].p($,g):(O[x]=ml($),O[x].c(),O[x].m(u,ee))}for(;x<O.length;x+=1)O[x].d(1);O.length=ye.length}if(g[0]&8208){xe=n[13].filter(wl);let x;for(x=0;x<xe.length;x+=1){const $=hl(n,xe,x);q[x]?q[x].p($,g):(q[x]=vl($),q[x].c(),q[x].m(u,B))}for(;x<q.length;x+=1)q[x].d(1);q.length=xe.length}if(g[0]&8208){De=n[13].filter(yl);let x;for(x=0;x<De.length;x+=1){const $=fl(n,De,x);z[x]?z[x].p($,g):(z[x]=bl($),z[x].c(),z[x].m(u,null))}for(;x<z.length;x+=1)z[x].d(1);z.length=De.length}g[0]&1&&Ue(u,"hidden",n[0]!=null),(!W||g[0]&514&&Ce!==(Ce=n[1].map(n[28]).join(", "))&&se.value!==Ce)&&(se.value=Ce);const T={};g[0]&32&&(T.on_click=n[5]),g[0]&2&&(T.disabled=n[1].length==0),oe.$set(T),(!W||g[0]&12&&Pe!==(Pe=n[2]+" ("+n[3].join(", ")+")")&&ie.value!==Pe)&&(ie.value=Pe);const pe={};g[0]&64&&(pe.on_click=n[6]),ce.$set(pe)},i(n){if(!W){for(let g=0;g<Te.length;g+=1)ue(V[g]);ue(oe.$$.fragment,n),ue(ce.$$.fragment,n),W=!0}},o(n){for(let g=0;g<V.length;g+=1)de(V[g]);de(oe.$$.fragment,n),de(ce.$$.fragment,n),W=!1},d(n){n&&f(e);for(let g=0;g<V.length;g+=1)V[g].d();Oe(O,n),Oe(q,n),Oe(z,n),Ne(oe),Ne(ce),Ge=!1,Tl(Qe)}}}const it=t=>t.target.select(),kl=t=>t.type=="folder",wl=t=>t.type=="drive",yl=t=>t.type=="removable_storage";function nt(t,e,l){let i,r,o;Ul(t,Kl,a=>l(9,o=a));const{click_outside:k}=$l;Ol();let p=[null],v=0,{id:D}=e,E=Rl.map(a=>o[a]),{selectingItems:d=[]}=e,{filetypes_desc:b}=e,{filetypes:y=[]}=e,{multiple:M=!0}=e;function N(a,B){if(!H(B)||B.type!="file")return;let te=d.includes(B.id);(a.ctrlKey||a.metaKey)&&M?(console.log("ctrl key pressed"),te?l(1,d=d.filter(Se=>Se!=B.id)):l(1,d=[...d,B.id])):l(1,d=te?[]:[B.id])}function I(){console.log(d),console.log("clear_selection"),l(1,d=[])}function H(a){return a.type!="file"||y.length==0?!0:y.includes(a.ext)}function C(a){I();let B=o[a];(B==null?void 0:B.type)=="file"?(l(1,d=[a]),P()):(l(7,p=[...p.slice(0,v+1),a]),l(8,v=p.length-1),l(0,D=p[v]))}function V(){l(8,v=Math.max(0,v-1)),l(0,D=p[v])}function ne(){l(8,v=Math.min(p.length-1,v+1)),l(0,D=p[v])}function S(){let a=o[p[v]].parent;C(a)}function u(a){return a==null?null:a.icon!=null?`url(${a.icon})`:ul[a.ext]!=null?`url(/images/xp/icons/${ul[a.ext]})`:null}function w(a){if(a.key=="Enter"){let B=Ql(a.target.value);B==null&&(B=Xl(a.target.value)),console.log("found id",B),B&&(C(B),a.target.blur())}}let{on_open:P=()=>{}}=e,{on_cancel:U=()=>{}}=e;const G=a=>C(a.id),re=(a,B)=>N(B,a),ee=a=>C(a.id),J=a=>C(a.id),le=a=>C(a.id),Ve=a=>o[a].name,_e=()=>I();return t.$$set=a=>{"id"in a&&l(0,D=a.id),"selectingItems"in a&&l(1,d=a.selectingItems),"filetypes_desc"in a&&l(2,b=a.filetypes_desc),"filetypes"in a&&l(3,y=a.filetypes),"multiple"in a&&l(22,M=a.multiple),"on_open"in a&&l(5,P=a.on_open),"on_cancel"in a&&l(6,U=a.on_cancel)},t.$$.update=()=>{t.$$.dirty[0]&384&&l(11,i=Gl(p[v])||"My Computer"),t.$$.dirty[0]&513&&l(10,r=o[D]==null?[]:o[D].children.map(a=>o[a]).filter(a=>a!=null).filter(a=>!Hl.includes(a.id)))},[D,d,b,y,C,P,U,p,v,o,r,i,k,E,N,I,H,V,ne,S,u,w,M,G,re,ee,J,le,Ve,_e]}class rt extends Il{constructor(e){super(),Vl(this,e,nt,st,Sl,{id:0,selectingItems:1,filetypes_desc:2,filetypes:3,multiple:22,open:4,on_open:5,on_cancel:6},null,[-1,-1])}get id(){return this.$$.ctx[0]}set id(e){this.$$set({id:e}),K()}get selectingItems(){return this.$$.ctx[1]}set selectingItems(e){this.$$set({selectingItems:e}),K()}get filetypes_desc(){return this.$$.ctx[2]}set filetypes_desc(e){this.$$set({filetypes_desc:e}),K()}get filetypes(){return this.$$.ctx[3]}set filetypes(e){this.$$set({filetypes:e}),K()}get multiple(){return this.$$.ctx[22]}set multiple(e){this.$$set({multiple:e}),K()}get open(){return this.$$.ctx[4]}get on_open(){return this.$$.ctx[5]}set on_open(e){this.$$set({on_open:e}),K()}get on_cancel(){return this.$$.ctx[6]}set on_cancel(e){this.$$set({on_cancel:e}),K()}}function xl(t,e,l){const i=t.slice();return i[13]=e[l],i}function Dl(t){let e,l,i=`url(${t[13].icon})`,r,o,k=t[13].name+"",p,v,D,E;function d(){return t[9](t[13])}return{c(){e=h("div"),l=h("div"),r=F(),o=h("span"),p=Y(k),v=F(),this.h()},l(b){e=_(b,"DIV",{class:!0});var y=m(e);l=_(y,"DIV",{class:!0}),m(l).forEach(f),r=j(y),o=_(y,"SPAN",{class:!0});var M=m(o);p=Z(M,k),M.forEach(f),v=j(y),y.forEach(f),this.h()},h(){c(l,"class","w-8 h-8 bg-contain bg-no-repeat"),fe(l,"background-image",i,!1),c(o,"class","mt-1 text-[12px] text-black"),c(e,"class","w-full h-[80px] flex flex-col items-center p-2 hover:bg-slate-100 rounded")},m(b,y){he(b,e,y),s(e,l),s(e,r),s(e,o),s(o,p),s(e,v),D||(E=R(e,"click",d),D=!0)},p(b,y){t=b},d(b){b&&f(e),D=!1,E()}}}function at(t){let e,l,i,r,o,k,p,v,D,E,d,b,y,M,N,I,H;i=new Al({props:{options:{title:"Open",maximize_btn:!1,minimize_btn:!1},on_click_close:t[5]}});let C=t[7],V=[];for(let S=0;S<C.length;S+=1)V[S]=Dl(xl(t,C,S));let ne={filetypes_desc:t[3],filetypes:t[2].map(El),multiple:t[4],on_open:t[10],on_cancel:t[5]};return M=new rt({props:ne}),t[11](M),{c(){e=h("div"),l=h("div"),Fe(i.$$.fragment),r=F(),o=h("div"),k=h("div"),p=h("div"),v=h("span"),D=Y("Look in:"),E=F(),d=h("div");for(let S=0;S<V.length;S+=1)V[S].c();b=F(),y=h("div"),Fe(M.$$.fragment),this.h()},l(S){e=_(S,"DIV",{class:!0});var u=m(e);l=_(u,"DIV",{class:!0});var w=m(l);je(i.$$.fragment,w),r=j(w),o=_(w,"DIV",{class:!0});var P=m(o);k=_(P,"DIV",{class:!0});var U=m(k);p=_(U,"DIV",{class:!0});var G=m(p);v=_(G,"SPAN",{class:!0});var re=m(v);D=Z(re,"Look in:"),re.forEach(f),G.forEach(f),E=j(U),d=_(U,"DIV",{class:!0});var ee=m(d);for(let le=0;le<V.length;le+=1)V[le].l(ee);ee.forEach(f),U.forEach(f),b=j(P),y=_(P,"DIV",{class:!0});var J=m(y);je(M.$$.fragment,J),J.forEach(f),P.forEach(f),w.forEach(f),u.forEach(f),this.h()},h(){c(v,"class","text-[11px] text-black"),c(p,"class","h-7 mr-2 flex flex-row justify-end items-center"),c(d,"class","bg-xp-yellow-light shadow rounded w-full"),c(k,"class","shrink-0 pt-1 pr-1 w-[100px]"),c(y,"class","grow flex flex-col relative"),c(o,"class","grow p-2 pb-1 bg-xp-yellow overflow-hidden flex flex-row shadow-lg border-t-0 border-2 border-blue-600"),c(l,"class","absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex flex-col"),fe(l,"width","600px",!1),fe(l,"height","500px",!1),c(e,"class","absolute inset-0 bg-slate-50/40 rounded-t-lg z-10")},m(S,u){he(S,e,u),s(e,l),Be(i,l,null),s(l,r),s(l,o),s(o,k),s(k,p),s(p,v),s(v,D),s(k,E),s(k,d);for(let w=0;w<V.length;w+=1)V[w].m(d,null);s(o,b),s(o,y),Be(M,y,null),N=!0,I||(H=R(e,"click",Ml(t[12])),I=!0)},p(S,[u]){if(u&130){C=S[7];let P;for(P=0;P<C.length;P+=1){const U=xl(S,C,P);V[P]?V[P].p(U,u):(V[P]=Dl(U),V[P].c(),V[P].m(d,null))}for(;P<V.length;P+=1)V[P].d(1);V.length=C.length}const w={};u&8&&(w.filetypes_desc=S[3]),u&4&&(w.filetypes=S[2].map(El)),u&16&&(w.multiple=S[4]),u&67&&(w.on_open=S[10]),M.$set(w)},i(S){N||(ue(i.$$.fragment,S),ue(M.$$.fragment,S),N=!0)},o(S){de(i.$$.fragment,S),de(M.$$.fragment,S),N=!1},d(S){S&&f(e),Ne(i),Oe(V,S),t[11](null),Ne(M),I=!1,H()}}}const El=t=>t.toLowerCase();function ot(t,e,l){let{self:i}=e,{selected_items:r=[]}=e,{viewer:o}=e,{filetypes:k=[]}=e,{filetypes_desc:p="All Files"}=e,{multiple:v=!0}=e,D=[{id:Wl,name:"Desktop",icon:"/images/xp/icons/Desktop.png"},{id:Yl,name:"My Pictures",icon:"/images/xp/icons/MyPictures.png"},{id:Zl,name:"My Music",icon:"/images/xp/icons/MyMusic.png"},{id:null,name:"My Computer",icon:"/images/xp/icons/MyComputer.png"}];function E(){console.log(i),i.$destroy()}let{on_open:d=()=>{}}=e;const b=I=>o.open(I.id),y=()=>{l(0,r=o.selectingItems),d()};function M(I){zl[I?"unshift":"push"](()=>{o=I,l(1,o)})}const N=I=>{I.target.querySelector("div").classList.add("animate-blink"),setTimeout(()=>{I.target.querySelector("div").classList.remove("animate-blink")},400)};return t.$$set=I=>{"self"in I&&l(8,i=I.self),"selected_items"in I&&l(0,r=I.selected_items),"viewer"in I&&l(1,o=I.viewer),"filetypes"in I&&l(2,k=I.filetypes),"filetypes_desc"in I&&l(3,p=I.filetypes_desc),"multiple"in I&&l(4,v=I.multiple),"on_open"in I&&l(6,d=I.on_open)},[r,o,k,p,v,E,d,D,i,b,y,M,N]}class yt extends Il{constructor(e){super(),Vl(this,e,ot,at,Sl,{self:8,selected_items:0,viewer:1,filetypes:2,filetypes_desc:3,multiple:4,destroy:5,on_open:6})}get self(){return this.$$.ctx[8]}set self(e){this.$$set({self:e}),K()}get selected_items(){return this.$$.ctx[0]}set selected_items(e){this.$$set({selected_items:e}),K()}get viewer(){return this.$$.ctx[1]}set viewer(e){this.$$set({viewer:e}),K()}get filetypes(){return this.$$.ctx[2]}set filetypes(e){this.$$set({filetypes:e}),K()}get filetypes_desc(){return this.$$.ctx[3]}set filetypes_desc(e){this.$$set({filetypes_desc:e}),K()}get multiple(){return this.$$.ctx[4]}set multiple(e){this.$$set({multiple:e}),K()}get destroy(){return this.$$.ctx[5]}get on_open(){return this.$$.ctx[6]}set on_open(e){this.$$set({on_open:e}),K()}}export{yt as default};
