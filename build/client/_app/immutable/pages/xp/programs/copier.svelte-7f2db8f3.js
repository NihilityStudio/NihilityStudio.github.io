import{S as A,i as H,R as y,s as K,w as S,x as W,y as G,f as J,t as R,B as T,Z as L,o as Q,l as v,a as q,r as V,m as k,n as I,c as M,u as j,h as D,T as U,p as m,b as X,J as a,v as tt,Y as et}from"../../../chunks/index-23b4510f.js";import{W as st}from"../../../chunks/Window-5b3973f4.js";import{B as it}from"../../../chunks/Button-b8e82496.js";import{r as nt,h as rt}from"../../../chunks/store-21632576.js";import{j as ot,h as at,g as Z}from"../../../chunks/utils-1f7a3290.js";import{b as $}from"../../../chunks/fs-93cd4a3b.js";import{D as lt}from"../../../chunks/DumbProgress-04334b73.js";import"../../../chunks/TitleBar-a60117f4.js";import"../../../chunks/lodash-b0811ec1.js";import"../../../chunks/_commonjsHelpers-cea7ac1a.js";import"../../../chunks/index-355ed6be.js";/* empty css                                                           */import"../../../chunks/index-6533b345.js";import"../../../chunks/index-5b24d155.js";import"../../../chunks/finder-bfb6260e.js";function ct(o){let t,i,n,s,l,c,_,d,h,b,C,u,F,E,N,g,P,e,f,p;return g=new lt({props:{style:"height:15px;margin:5px 0;flex-shrink:0;"}}),f=new it({props:{title:"Cancel",on_click:o[2]}}),{c(){t=v("div"),i=v("div"),n=v("div"),s=v("img"),c=q(),_=v("p"),d=V("Copying "),h=V(o[3]),b=V("..."),C=q(),u=v("p"),F=V("From host to "),E=V(o[4]),N=q(),S(g.$$.fragment),P=q(),e=v("div"),S(f.$$.fragment),this.h()},l(r){t=k(r,"DIV",{slot:!0,class:!0});var w=I(t);i=k(w,"DIV",{class:!0});var z=I(i);n=k(z,"DIV",{class:!0});var x=I(n);s=k(x,"IMG",{src:!0,width:!0,height:!0,alt:!0,class:!0}),c=M(x),_=k(x,"P",{class:!0});var B=I(_);d=j(B,"Copying "),h=j(B,o[3]),b=j(B,"..."),B.forEach(D),C=M(x),u=k(x,"P",{class:!0});var O=I(u);F=j(O,"From host to "),E=j(O,o[4]),O.forEach(D),N=M(x),W(g.$$.fragment,x),x.forEach(D),P=M(z),e=k(z,"DIV",{class:!0});var Y=I(e);W(f.$$.fragment,Y),Y.forEach(D),z.forEach(D),w.forEach(D),this.h()},h(){U(s.src,l="/images/xp/copying.gif")||m(s,"src",l),m(s,"width","272"),m(s,"height","60"),m(s,"alt",""),m(s,"class","shrink-0"),m(_,"class","m-1 text-[12px] text-ellipsis line-clamp-1 h-4 shrink-0"),m(u,"class","m-1 text-[12px] text-ellipsis line-clamp-1 h-4 shrink-0"),m(n,"class","grow w-[270px] flex flex-col shrink-0 pr-1"),m(e,"class","flex flex-col justify-end w-[75px] shrink-0"),m(i,"class","absolute inset-2 flex flex-row overflow-hidden"),m(t,"slot","content"),m(t,"class","absolute inset-1 bg-xp-yellow")},m(r,w){X(r,t,w),a(t,i),a(i,n),a(n,s),a(n,c),a(n,_),a(_,d),a(_,h),a(_,b),a(n,C),a(n,u),a(u,F),a(u,E),a(n,N),G(g,n,null),a(i,P),a(i,e),G(f,e,null),p=!0},p(r,w){(!p||w&8)&&tt(h,r[3])},i(r){p||(J(g.$$.fragment,r),J(f.$$.fragment,r),p=!0)},o(r){R(g.$$.fragment,r),R(f.$$.fragment,r),p=!1},d(r){r&&D(t),T(g),T(f)}}}function ft(o){let t,i,n={options:o[1],on_click_close:o[2],$$slots:{content:[ct]},$$scope:{ctx:o}};return t=new st({props:n}),o[11](t),{c(){S(t.$$.fragment)},l(s){W(t.$$.fragment,s)},m(s,l){G(t,s,l),i=!0},p(s,[l]){const c={};l&2&&(c.options=s[1]),l&32776&&(c.$$scope={dirty:l,ctx:s}),t.$set(c)},i(s){i||(J(t.$$.fragment,s),i=!0)},o(s){R(t.$$.fragment,s),i=!1},d(s){o[11](null),T(t,s)}}}function mt(o,t,i){let n;L(o,rt,e=>i(13,n=e));let{id:s}=t,{window:l}=t,{self:c}=t,{parentNode:_}=t,{copying_obj:d}=t,{target_folder_id:h}=t,{exec_path:b}=t,C=!1,u="",F=n[h].name,{options:E={title:"Copying",min_width:370,min_height:180,width:370,height:180,resizable:!1,minimize_btn:!1,maximize_btn:!1,id:s,exec_path:b}}=t;Q(async()=>{if(d&&h){console.log(d);for(let e of Object.keys(d))console.log(e),await g(d[e],h,e);await N()}});async function N(){C=!0,nt.update(e=>e.filter(f=>f!=c)),c.$destroy()}async function g(e,f,p){if(!C)if(e instanceof File){i(3,u=e.name);let r=new File([e],e.name,{type:ot(e.name)||e.type});await $("file",Z(p),at(p,Z(p)),f,r)}else{let r=await $("folder","",p,f,null);for(let w of Object.keys(e))await g(e[w],r,w)}}function P(e){et[e?"unshift":"push"](()=>{l=e,i(0,l)})}return o.$$set=e=>{"id"in e&&i(5,s=e.id),"window"in e&&i(0,l=e.window),"self"in e&&i(6,c=e.self),"parentNode"in e&&i(7,_=e.parentNode),"copying_obj"in e&&i(8,d=e.copying_obj),"target_folder_id"in e&&i(9,h=e.target_folder_id),"exec_path"in e&&i(10,b=e.exec_path),"options"in e&&i(1,E=e.options)},[l,E,N,u,F,s,c,_,d,h,b,P]}class Nt extends A{constructor(t){super(),H(this,t,mt,ft,K,{id:5,window:0,self:6,parentNode:7,copying_obj:8,target_folder_id:9,exec_path:10,options:1,destroy:2})}get id(){return this.$$.ctx[5]}set id(t){this.$$set({id:t}),y()}get window(){return this.$$.ctx[0]}set window(t){this.$$set({window:t}),y()}get self(){return this.$$.ctx[6]}set self(t){this.$$set({self:t}),y()}get parentNode(){return this.$$.ctx[7]}set parentNode(t){this.$$set({parentNode:t}),y()}get copying_obj(){return this.$$.ctx[8]}set copying_obj(t){this.$$set({copying_obj:t}),y()}get target_folder_id(){return this.$$.ctx[9]}set target_folder_id(t){this.$$set({target_folder_id:t}),y()}get exec_path(){return this.$$.ctx[10]}set exec_path(t){this.$$set({exec_path:t}),y()}get options(){return this.$$.ctx[1]}set options(t){this.$$set({options:t}),y()}get destroy(){return this.$$.ctx[2]}}export{Nt as default};
