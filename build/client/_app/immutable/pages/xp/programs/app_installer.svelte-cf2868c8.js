import{S as de,i as he,P as X,s as _e,w as J,x as K,y as O,f as q,t as z,B as Y,Y as me,l as y,m as k,n as v,h,p as w,b as H,g as we,d as ge,W as ie,T as re,a as S,r as B,U as ae,c as T,u as $,J as c,E as be,a9 as oe,K as se,_ as ve,q as ce,v as le}from"../../../chunks/index-70a5fc52.js";import{W as xe}from"../../../chunks/Window-654de68f.js";import{B as te}from"../../../chunks/Button-e8580b92.js";import{h as ye,r as ke,a as G,k as fe,j as Ee}from"../../../chunks/store-59feb90e.js";import{n as Ie}from"../../../chunks/fs-f48425c2.js";import"../../../chunks/TitleBar-5f961d1e.js";import"../../../chunks/utils-1f7a3290.js";import"../../../chunks/lodash-b0811ec1.js";import"../../../chunks/_commonjsHelpers-cea7ac1a.js";import"../../../chunks/index-355ed6be.js";/* empty css                                                           */import"../../../chunks/index-f053a494.js";import"../../../chunks/finder-52261c48.js";function De(a){let e,t,l,s,r,i,x,o,p,f,_;return f=new te({props:{on_click:a[11],style:"margin-right:10px;",title:"Launch >"}}),{c(){e=y("div"),t=y("div"),l=re("svg"),s=re("path"),r=S(),i=y("p"),x=B("Installed Successfully"),o=S(),p=y("div"),J(f.$$.fragment),this.h()},l(d){e=k(d,"DIV",{class:!0});var u=v(e);t=k(u,"DIV",{class:!0});var g=v(t);l=ae(g,"svg",{class:!0,xmlns:!0,viewBox:!0});var b=v(l);s=ae(b,"path",{d:!0}),v(s).forEach(h),b.forEach(h),r=T(g),i=k(g,"P",{class:!0});var V=v(i);x=$(V,"Installed Successfully"),V.forEach(h),g.forEach(h),o=T(u),p=k(u,"DIV",{class:!0});var D=v(p);K(f.$$.fragment,D),D.forEach(h),u.forEach(h),this.h()},h(){w(s,"d","M256 512c141.4 0 256-114.6 256-256S397.4 0 256 0S0 114.6 0 256S114.6 512 256 512zM369 209L241 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L335 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"),w(l,"class","w-16 h-16 fill-green-500"),w(l,"xmlns","http://www.w3.org/2000/svg"),w(l,"viewBox","0 0 512 512"),w(i,"class","text-xl font-bold mt-2"),w(t,"class","grow flex flex-col items-center justify-center overflow-hidden"),w(p,"class","flex flex-row shrink-0 grow-0 justify-end"),w(e,"class","absolute inset-0 flex flex-col p-2 text-[14px] text-slate-900 font-Trebuchet justify-between")},m(d,u){H(d,e,u),c(e,t),c(t,l),c(l,s),c(t,r),c(t,i),c(i,x),c(e,o),c(e,p),O(f,p,null),_=!0},p:be,i(d){_||(q(f.$$.fragment,d),_=!0)},o(d){z(f.$$.fragment,d),_=!1},d(d){d&&h(e),Y(f)}}}function Pe(a){let e,t,l,s,r,i,x,o,p,f,_,d,u,g,b,V,D,A,N,W,C,F,L,M,Q,n={title:" Fetch ",disabled:a[3].trim()=="",on_click:a[9]};b=new te({props:n}),a[19](b);let E=a[5]&&ue(a),I=a[6]&&pe(a);return W=new te({props:{on_click:a[10],style:"margin-right:10px;",title:"Install >",disabled:a[5]==null}}),F=new te({props:{on_click:a[1],title:"Cancel"}}),{c(){e=y("div"),t=y("div"),l=y("p"),s=B("The Installer will help you add webapps into Windows XP. Start by entering the web url."),r=S(),i=y("p"),x=B("For developers who want their existing webapps to interact with Windows filesystem, please see "),o=y("a"),p=B("this guide"),f=B(". It's simple, just adding a few lines of code to your existing webapps to pick, read & and write files"),_=S(),d=y("div"),u=y("input"),g=S(),J(b.$$.fragment),V=S(),E&&E.c(),D=S(),I&&I.c(),A=S(),N=y("div"),J(W.$$.fragment),C=S(),J(F.$$.fragment),this.h()},l(m){e=k(m,"DIV",{class:!0});var j=v(e);t=k(j,"DIV",{class:!0});var P=v(t);l=k(P,"P",{});var U=v(l);s=$(U,"The Installer will help you add webapps into Windows XP. Start by entering the web url."),U.forEach(h),r=T(P),i=k(P,"P",{class:!0});var R=v(i);x=$(R,"For developers who want their existing webapps to interact with Windows filesystem, please see "),o=k(R,"A",{class:!0});var ne=v(o);p=$(ne,"this guide"),ne.forEach(h),f=$(R,". It's simple, just adding a few lines of code to your existing webapps to pick, read & and write files"),R.forEach(h),_=T(P),d=k(P,"DIV",{class:!0});var Z=v(d);u=k(Z,"INPUT",{placeholder:!0,class:!0}),g=T(Z),K(b.$$.fragment,Z),Z.forEach(h),V=T(P),E&&E.l(P),D=T(P),I&&I.l(P),P.forEach(h),A=T(j),N=k(j,"DIV",{class:!0});var ee=v(N);K(W.$$.fragment,ee),C=T(ee),K(F.$$.fragment,ee),ee.forEach(h),j.forEach(h),this.h()},h(){w(o,"class","text-blue-600 cursor-pointer"),w(i,"class","my-2"),w(u,"placeholder","webapp url"),w(u,"class","grow p-1 text-slate-800 mr-2 text-sm"),w(d,"class","mt-2 flex flex-row"),w(t,"class","flex-col flex grow-0 overflow-hidden"),w(N,"class","flex flex-row shrink-0 grow-0 justify-end"),w(e,"class","absolute inset-0 flex flex-col p-2 text-[14px] text-slate-900 font-Trebuchet justify-between")},m(m,j){H(m,e,j),c(e,t),c(t,l),c(l,s),c(t,r),c(t,i),c(i,x),c(i,o),c(o,p),c(i,f),c(t,_),c(t,d),c(d,u),oe(u,a[3]),c(d,g),O(b,d,null),c(t,V),E&&E.m(t,null),c(t,D),I&&I.m(t,null),c(e,A),c(e,N),O(W,N,null),c(N,C),O(F,N,null),L=!0,M||(Q=[se(o,"click",a[16]),se(u,"input",a[17]),se(u,"input",a[18])],M=!0)},p(m,j){j&8&&u.value!==m[3]&&oe(u,m[3]);const P={};j&8&&(P.disabled=m[3].trim()==""),b.$set(P),m[5]?E?E.p(m,j):(E=ue(m),E.c(),E.m(t,D)):E&&(E.d(1),E=null),m[6]?I?I.p(m,j):(I=pe(m),I.c(),I.m(t,null)):I&&(I.d(1),I=null);const U={};j&32&&(U.disabled=m[5]==null),W.$set(U)},i(m){L||(q(b.$$.fragment,m),q(W.$$.fragment,m),q(F.$$.fragment,m),L=!0)},o(m){z(b.$$.fragment,m),z(W.$$.fragment,m),z(F.$$.fragment,m),L=!1},d(m){m&&h(e),a[19](null),Y(b),E&&E.d(),I&&I.d(),Y(W),Y(F),M=!1,ve(Q)}}}function ue(a){let e,t,l=`url(${a[5].icon})`,s,r,i,x=a[5].name+"",o,p,f,_=a[5].desc+"",d;return{c(){e=y("div"),t=y("div"),s=S(),r=y("div"),i=y("p"),o=B(x),p=S(),f=y("p"),d=B(_),this.h()},l(u){e=k(u,"DIV",{class:!0});var g=v(e);t=k(g,"DIV",{class:!0}),v(t).forEach(h),s=T(g),r=k(g,"DIV",{class:!0});var b=v(r);i=k(b,"P",{class:!0});var V=v(i);o=$(V,x),V.forEach(h),p=T(b),f=k(b,"P",{});var D=v(f);d=$(D,_),D.forEach(h),b.forEach(h),g.forEach(h),this.h()},h(){w(t,"class","grow-0 shrink-0 bg-cover bg-no-repeat w-12 h-12 m-1"),ce(t,"background-image",l,!1),w(i,"class","font-bold text-base"),w(r,"class",""),w(e,"class","flex flex-row p-2 overflow-hidden my-2")},m(u,g){H(u,e,g),c(e,t),c(e,s),c(e,r),c(r,i),c(i,o),c(r,p),c(r,f),c(f,d)},p(u,g){g&32&&l!==(l=`url(${u[5].icon})`)&&ce(t,"background-image",l,!1),g&32&&x!==(x=u[5].name+"")&&le(o,x),g&32&&_!==(_=u[5].desc+"")&&le(d,_)},d(u){u&&h(e)}}}function pe(a){let e,t=a[6].message+"",l;return{c(){e=y("p"),l=B(t),this.h()},l(s){e=k(s,"P",{class:!0});var r=v(e);l=$(r,t),r.forEach(h),this.h()},h(){w(e,"class","p-2 text-red-400")},m(s,r){H(s,e,r),c(e,l)},p(s,r){r&64&&t!==(t=s[6].message+"")&&le(l,t)},d(s){s&&h(e)}}}function Ve(a){let e,t,l,s;const r=[Pe,De],i=[];function x(o,p){return o[7]?1:0}return t=x(a),l=i[t]=r[t](a),{c(){e=y("div"),l.c(),this.h()},l(o){e=k(o,"DIV",{slot:!0,class:!0});var p=v(e);l.l(p),p.forEach(h),this.h()},h(){w(e,"slot","content"),w(e,"class","absolute inset-1 bg-xp-yellow-light")},m(o,p){H(o,e,p),i[t].m(e,null),s=!0},p(o,p){let f=t;t=x(o),t===f?i[t].p(o,p):(we(),z(i[f],1,1,()=>{i[f]=null}),ge(),l=i[t],l?l.p(o,p):(l=i[t]=r[t](o),l.c()),q(l,1),l.m(e,null))},i(o){s||(q(l),s=!0)},o(o){z(l),s=!1},d(o){o&&h(e),i[t].d()}}}function je(a){let e,t,l={options:a[2],on_click_close:a[1],$$slots:{content:[Ve]},$$scope:{ctx:a}};return e=new xe({props:l}),a[20](e),{c(){J(e.$$.fragment)},l(s){K(e.$$.fragment,s)},m(s,r){O(e,s,r),t=!0},p(s,[r]){const i={};r&4&&(i.options=s[2]),r&16777464&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){t||(q(e.$$.fragment,s),t=!0)},o(s){z(e.$$.fragment,s),t=!1},d(s){a[20](null),Y(e,s)}}}function Se(a,e,t){let l;me(a,ye,n=>t(22,l=n));let{id:s}=e,{window:r}=e,{self:i}=e,{parentNode:x}=e,{exec_path:o}=e,p="",f,_,d,u=!1,g;async function b(){ke.update(n=>n.filter(E=>E!=i)),i.$destroy()}let{options:V={title:"Installer",min_width:500,min_height:400,width:500,height:400,icon:"/images/xp/icons/Programs.png",resizable:!1,maximize_btn_disabled:!0,id:s,exec_path:o}}=e;function D(n){G.set({path:"./programs/internet_explorer.svelte",fs_item:{url:n}})}async function A(){t(6,d=null),t(4,f.disabled=!0,f),t(4,f.title="Fetching",f),fetch("/api/webapp_info",{method:"GET",headers:{webapp_url:p}}).then(n=>n.json()).then(n=>{console.log(n),t(5,_=n.webapp),t(4,f.title=" Fetch ",f),t(4,f.disabled=!1,f),_==null&&t(6,d={message:"The webapp you requested has the X-Frame-Options header value set, which prevents win32.run from loading it."})})}async function N(){g=await Ie({basename:_.name,ext:".exe",executable:!0,icon:_.icon,webapp:{name:_.name,icon:_.icon,url:_.url}},Ee),t(7,u=!0)}async function W(){let n=l[g];n.type=="file"?n.executable?G.set({path:n.url,webapp:n.webapp}):fe[n.ext]!=null?G.set({path:fe[n.ext][0].path,fs_item:n}):G.set({path:"./programs/notepad.svelte",fs_item:n}):G.set({path:"./programs/my_computer.svelte",fs_item:n}),b()}const C=()=>D("https://docs.win32.run/3rd-party-apps");function F(){p=this.value,t(3,p)}const L=()=>{t(5,_=null),t(6,d=null)};function M(n){ie[n?"unshift":"push"](()=>{f=n,t(4,f)})}function Q(n){ie[n?"unshift":"push"](()=>{r=n,t(0,r)})}return a.$$set=n=>{"id"in n&&t(12,s=n.id),"window"in n&&t(0,r=n.window),"self"in n&&t(13,i=n.self),"parentNode"in n&&t(14,x=n.parentNode),"exec_path"in n&&t(15,o=n.exec_path),"options"in n&&t(2,V=n.options)},[r,b,V,p,f,_,d,u,D,A,N,W,s,i,x,o,C,F,L,M,Q]}class Ue extends de{constructor(e){super(),he(this,e,Se,je,_e,{id:12,window:0,self:13,parentNode:14,exec_path:15,destroy:1,options:2})}get id(){return this.$$.ctx[12]}set id(e){this.$$set({id:e}),X()}get window(){return this.$$.ctx[0]}set window(e){this.$$set({window:e}),X()}get self(){return this.$$.ctx[13]}set self(e){this.$$set({self:e}),X()}get parentNode(){return this.$$.ctx[14]}set parentNode(e){this.$$set({parentNode:e}),X()}get exec_path(){return this.$$.ctx[15]}set exec_path(e){this.$$set({exec_path:e}),X()}get destroy(){return this.$$.ctx[1]}get options(){return this.$$.ctx[2]}set options(e){this.$$set({options:e}),X()}}export{Ue as default};
