import{S as ie,i as ae,R,s as fe,w as A,x as B,y as U,f as j,t as z,B as q,Z as ce,l as w,m as v,n as g,h,p as d,b as X,g as ue,d as he,Y as K,V as Y,a as D,r as H,W as Z,c as V,u as S,J as p,E as pe,a9 as Q,K as ee,N as de,q as te,v as J,e as se}from"../../../chunks/index-23b4510f.js";import{W as _e}from"../../../chunks/Window-5b3973f4.js";import{B as M}from"../../../chunks/Button-b8e82496.js";import{h as me,r as be,a as $,j as re,i as ge}from"../../../chunks/store-21632576.js";import{n as we}from"../../../chunks/fs-93cd4a3b.js";import"../../../chunks/TitleBar-a60117f4.js";import"../../../chunks/utils-1f7a3290.js";import"../../../chunks/lodash-b0811ec1.js";import"../../../chunks/_commonjsHelpers-cea7ac1a.js";import"../../../chunks/index-355ed6be.js";/* empty css                                                           */import"../../../chunks/index-6533b345.js";import"../../../chunks/index-5b24d155.js";import"../../../chunks/finder-bfb6260e.js";function ve(u){let t,e,n,i,f,s,o,a,r,l,_;return l=new M({props:{on_click:u[11],style:"margin-right:10px;",title:"Launch >"}}),{c(){t=w("div"),e=w("div"),n=Y("svg"),i=Y("path"),f=D(),s=w("p"),o=H("Installed Successfully"),a=D(),r=w("div"),A(l.$$.fragment),this.h()},l(k){t=v(k,"DIV",{class:!0});var m=g(t);e=v(m,"DIV",{class:!0});var b=g(e);n=Z(b,"svg",{class:!0,xmlns:!0,viewBox:!0});var P=g(n);i=Z(P,"path",{d:!0}),g(i).forEach(h),P.forEach(h),f=V(b),s=v(b,"P",{class:!0});var I=g(s);o=S(I,"Installed Successfully"),I.forEach(h),b.forEach(h),a=V(m),r=v(m,"DIV",{class:!0});var L=g(r);B(l.$$.fragment,L),L.forEach(h),m.forEach(h),this.h()},h(){d(i,"d","M256 512c141.4 0 256-114.6 256-256S397.4 0 256 0S0 114.6 0 256S114.6 512 256 512zM369 209L241 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L335 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"),d(n,"class","w-16 h-16 fill-green-500"),d(n,"xmlns","http://www.w3.org/2000/svg"),d(n,"viewBox","0 0 512 512"),d(s,"class","text-xl font-bold mt-2"),d(e,"class","grow flex flex-col items-center justify-center overflow-hidden"),d(r,"class","flex flex-row shrink-0 grow-0 justify-end"),d(t,"class","absolute inset-0 flex flex-col p-2 text-[14px] text-slate-900 font-Trebuchet justify-between")},m(k,m){X(k,t,m),p(t,e),p(e,n),p(n,i),p(e,f),p(e,s),p(s,o),p(t,a),p(t,r),U(l,r,null),_=!0},p:pe,i(k){_||(j(l.$$.fragment,k),_=!0)},o(k){z(l.$$.fragment,k),_=!1},d(k){k&&h(t),q(l)}}}function ke(u){let t,e,n,i,f,s,o,a,r,l,_,k,m,b,P,I,L,N,W,G={title:" Fetch ",disabled:!oe(u[3]),on_click:u[9]};r=new M({props:G}),u[18](r);let y=u[5]&&le(u),E=u[6]&&ne(u);return b=new M({props:{on_click:u[10],style:"margin-right:10px;",title:"Install >",disabled:u[5]==null}}),I=new M({props:{on_click:u[1],title:"Cancel"}}),{c(){t=w("div"),e=w("div"),n=w("p"),i=H("This installer will help you convert any website into a RebornXP application. Start by entering URL of the website you want to install."),f=D(),s=w("div"),o=w("input"),a=D(),A(r.$$.fragment),l=D(),y&&y.c(),_=D(),E&&E.c(),k=D(),m=w("div"),A(b.$$.fragment),P=D(),A(I.$$.fragment),this.h()},l(x){t=v(x,"DIV",{class:!0});var F=g(t);e=v(F,"DIV",{class:!0});var C=g(e);n=v(C,"P",{});var c=g(n);i=S(c,"This installer will help you convert any website into a RebornXP application. Start by entering URL of the website you want to install."),c.forEach(h),f=V(C),s=v(C,"DIV",{class:!0});var T=g(s);o=v(T,"INPUT",{placeholder:!0,class:!0}),a=V(T),B(r.$$.fragment,T),T.forEach(h),l=V(C),y&&y.l(C),_=V(C),E&&E.l(C),C.forEach(h),k=V(F),m=v(F,"DIV",{class:!0});var O=g(m);B(b.$$.fragment,O),P=V(O),B(I.$$.fragment,O),O.forEach(h),F.forEach(h),this.h()},h(){d(o,"placeholder","webapp url"),d(o,"class","grow p-1 text-slate-800 mr-2 text-sm"),d(s,"class","mt-2 flex flex-row"),d(e,"class","flex-col flex grow-0 overflow-hidden"),d(m,"class","flex flex-row shrink-0 grow-0 justify-end"),d(t,"class","absolute inset-0 flex flex-col p-2 text-[14px] text-slate-900 font-Trebuchet justify-between")},m(x,F){X(x,t,F),p(t,e),p(e,n),p(n,i),p(e,f),p(e,s),p(s,o),Q(o,u[3]),p(s,a),U(r,s,null),p(e,l),y&&y.m(e,null),p(e,_),E&&E.m(e,null),p(t,k),p(t,m),U(b,m,null),p(m,P),U(I,m,null),L=!0,N||(W=[ee(o,"input",u[16]),ee(o,"input",u[17])],N=!0)},p(x,F){F&8&&o.value!==x[3]&&Q(o,x[3]);const C={};F&8&&(C.disabled=!oe(x[3])),r.$set(C),x[5]?y?y.p(x,F):(y=le(x),y.c(),y.m(e,_)):y&&(y.d(1),y=null),x[6]?E?E.p(x,F):(E=ne(x),E.c(),E.m(e,null)):E&&(E.d(1),E=null);const c={};F&32&&(c.disabled=x[5]==null),b.$set(c)},i(x){L||(j(r.$$.fragment,x),j(b.$$.fragment,x),j(I.$$.fragment,x),L=!0)},o(x){z(r.$$.fragment,x),z(b.$$.fragment,x),z(I.$$.fragment,x),L=!1},d(x){x&&h(t),u[18](null),q(r),y&&y.d(),E&&E.d(),q(b),q(I),N=!1,de(W)}}}function le(u){let t,e,n=`url(${u[5].icon})`,i,f,s,o=u[5].name+"",a,r,l,_=u[5].desc+"",k;return{c(){t=w("div"),e=w("div"),i=D(),f=w("div"),s=w("p"),a=H(o),r=D(),l=w("p"),k=H(_),this.h()},l(m){t=v(m,"DIV",{class:!0});var b=g(t);e=v(b,"DIV",{class:!0}),g(e).forEach(h),i=V(b),f=v(b,"DIV",{class:!0});var P=g(f);s=v(P,"P",{class:!0});var I=g(s);a=S(I,o),I.forEach(h),r=V(P),l=v(P,"P",{});var L=g(l);k=S(L,_),L.forEach(h),P.forEach(h),b.forEach(h),this.h()},h(){d(e,"class","grow-0 shrink-0 bg-cover bg-no-repeat w-12 h-12 m-1"),te(e,"background-image",n,!1),d(s,"class","font-bold text-base"),d(f,"class",""),d(t,"class","flex flex-row p-2 overflow-hidden my-2")},m(m,b){X(m,t,b),p(t,e),p(t,i),p(t,f),p(f,s),p(s,a),p(f,r),p(f,l),p(l,k)},p(m,b){b&32&&n!==(n=`url(${m[5].icon})`)&&te(e,"background-image",n,!1),b&32&&o!==(o=m[5].name+"")&&J(a,o),b&32&&_!==(_=m[5].desc+"")&&J(k,_)},d(m){m&&h(t)}}}function ne(u){let t,e=u[6].message+"",n,i,f;function s(r,l){return r[8]==="chrome"?Ee:r[8]==="firefox"?ye:xe}let o=s(u),a=o(u);return{c(){t=w("p"),n=H(e),i=D(),a.c(),f=se(),this.h()},l(r){t=v(r,"P",{class:!0});var l=g(t);n=S(l,e),l.forEach(h),i=V(r),a.l(r),f=se(),this.h()},h(){d(t,"class","p-2 text-red-400")},m(r,l){X(r,t,l),p(t,n),X(r,i,l),a.m(r,l),X(r,f,l)},p(r,l){l&64&&e!==(e=r[6].message+"")&&J(n,e),o===(o=s(r))&&a?a.p(r,l):(a.d(1),a=o(r),a&&(a.c(),a.m(f.parentNode,f)))},d(r){r&&h(t),r&&h(i),a.d(r),r&&h(f)}}}function xe(u){let t,e,n,i,f,s,o,a,r;return{c(){t=w("p"),e=w("a"),n=H("Click here to install the Ignore X-Frame Headers extension for Chrome-based browsers."),f=D(),s=w("p"),o=w("a"),a=H("Click here to install the Ignore X-Frame Headers extension for Firefox."),this.h()},l(l){t=v(l,"P",{class:!0});var _=g(t);e=v(_,"A",{href:!0,target:!0});var k=g(e);n=S(k,"Click here to install the Ignore X-Frame Headers extension for Chrome-based browsers."),k.forEach(h),_.forEach(h),f=V(l),s=v(l,"P",{class:!0});var m=g(s);o=v(m,"A",{href:!0,target:!0});var b=g(o);a=S(b,"Click here to install the Ignore X-Frame Headers extension for Firefox."),b.forEach(h),m.forEach(h),this.h()},h(){d(e,"href",i=u[6].chromeLink),d(e,"target","_blank"),d(t,"class","p-2 text-blue-400"),d(o,"href",r=u[6].firefoxLink),d(o,"target","_blank"),d(s,"class","p-2 text-blue-400")},m(l,_){X(l,t,_),p(t,e),p(e,n),X(l,f,_),X(l,s,_),p(s,o),p(o,a)},p(l,_){_&64&&i!==(i=l[6].chromeLink)&&d(e,"href",i),_&64&&r!==(r=l[6].firefoxLink)&&d(o,"href",r)},d(l){l&&h(t),l&&h(f),l&&h(s)}}}function ye(u){let t,e,n,i,f;return{c(){t=w("p"),e=w("a"),n=w("u"),i=H("Click here to install the Ignore X-Frame Headers extension for Firefox."),this.h()},l(s){t=v(s,"P",{class:!0});var o=g(t);e=v(o,"A",{href:!0,target:!0});var a=g(e);n=v(a,"U",{});var r=g(n);i=S(r,"Click here to install the Ignore X-Frame Headers extension for Firefox."),r.forEach(h),a.forEach(h),o.forEach(h),this.h()},h(){d(e,"href",f=u[6].firefoxLink),d(e,"target","_blank"),d(t,"class","p-2 text-blue-400")},m(s,o){X(s,t,o),p(t,e),p(e,n),p(n,i)},p(s,o){o&64&&f!==(f=s[6].firefoxLink)&&d(e,"href",f)},d(s){s&&h(t)}}}function Ee(u){let t,e,n,i,f;return{c(){t=w("p"),e=w("a"),n=w("u"),i=H("Click here to install the Ignore X-Frame Headers extension for Chrome-based browsers."),this.h()},l(s){t=v(s,"P",{class:!0});var o=g(t);e=v(o,"A",{href:!0,target:!0});var a=g(e);n=v(a,"U",{});var r=g(n);i=S(r,"Click here to install the Ignore X-Frame Headers extension for Chrome-based browsers."),r.forEach(h),a.forEach(h),o.forEach(h),this.h()},h(){d(e,"href",f=u[6].chromeLink),d(e,"target","_blank"),d(t,"class","p-2 text-blue-400")},m(s,o){X(s,t,o),p(t,e),p(e,n),p(n,i)},p(s,o){o&64&&f!==(f=s[6].chromeLink)&&d(e,"href",f)},d(s){s&&h(t)}}}function Ie(u){let t,e,n,i;const f=[ke,ve],s=[];function o(a,r){return a[7]?1:0}return e=o(u),n=s[e]=f[e](u),{c(){t=w("div"),n.c(),this.h()},l(a){t=v(a,"DIV",{slot:!0,class:!0});var r=g(t);n.l(r),r.forEach(h),this.h()},h(){d(t,"slot","content"),d(t,"class","absolute inset-1 bg-xp-yellow-light")},m(a,r){X(a,t,r),s[e].m(t,null),i=!0},p(a,r){let l=e;e=o(a),e===l?s[e].p(a,r):(ue(),z(s[l],1,1,()=>{s[l]=null}),he(),n=s[e],n?n.p(a,r):(n=s[e]=f[e](a),n.c()),j(n,1),n.m(t,null))},i(a){i||(j(n),i=!0)},o(a){z(n),i=!1},d(a){a&&h(t),s[e].d()}}}function Pe(u){let t,e,n={options:u[2],on_click_close:u[1],$$slots:{content:[Ie]},$$scope:{ctx:u}};return t=new _e({props:n}),u[19](t),{c(){A(t.$$.fragment)},l(i){B(t.$$.fragment,i)},m(i,f){U(t,i,f),e=!0},p(i,[f]){const s={};f&4&&(s.options=i[2]),f&33554936&&(s.$$scope={dirty:f,ctx:i}),t.$set(s)},i(i){e||(j(t.$$.fragment,i),e=!0)},o(i){z(t.$$.fragment,i),e=!1},d(i){u[19](null),q(t,i)}}}function oe(u){const t=/^(?:(?:https?:\/\/)?(?:www\.)?[a-z0-9-]+\.[a-z]{2,}|(?:(?:[a-z0-9-]+\.)+[a-z]{2,}))(?:\/[^\s]*)?$/i,e=u.replace(/^https?:\/\//i,"");return t.test(e)}function Fe(u,t,e){let n;ce(u,me,c=>e(21,n=c));let{id:i}=t,{window:f}=t,{self:s}=t,{parentNode:o}=t,{exec_path:a}=t,r="",l,_,k,m=!1,b,P="unknown";async function I(){be.update(c=>c.filter(T=>T!=s)),s.$destroy()}function L(){const c=navigator.userAgent;c.includes("Chrome")||c.includes("CriOS")||c.includes("Edge")||c.includes("Vivaldi")||c.includes("Brave")||c.includes("Opera")?e(8,P="chrome"):c.includes("Firefox")&&e(8,P="firefox")}L();let{options:N={title:"Installer",min_width:500,min_height:400,width:500,height:400,icon:"/images/xp/icons/Programs.png",resizable:!1,maximize_btn_disabled:!0,id:i,exec_path:a}}=t;async function W(){e(6,k=null),e(4,l.disabled=!0,l),e(4,l.title="Fetching",l);try{const c=await fetch("/api/webapp_info",{method:"GET",headers:{webapp_url:r,"Content-Type":"application/json"}});if(!c.ok)throw new Error(`HTTP error! status: ${c.status}`);const T=await c.json();e(5,_=T.webapp),e(4,l.title=" Fetch ",l),e(4,l.disabled=!1,l),_.xframe_restricted&&e(6,k={message:"The webapp you requested has the X-Frame-Options header value set, which prevents RebornXP from loading it. However, you can still use this app on RebornXP by installing the Ignore X-Frame Headers extension.",chromeLink:"https://chromewebstore.google.com/detail/ignore-x-frame-headers/gleekbfjekiniecknbkamfmkohkpodhe",firefoxLink:"https://addons.mozilla.org/en-US/firefox/addon/ignore-x-frame-options-header/"})}catch(c){console.error("There was a problem with the fetch operation:",c)}}async function G(){b=await we({basename:_.name,ext:".exe",executable:!0,icon:_.icon,webapp:{name:_.name,icon:_.icon,url:_.url}},ge),e(7,m=!0)}async function y(){let c=n[b];c.type=="file"?c.executable?$.set({path:c.url,webapp:c.webapp}):re[c.ext]!=null?$.set({path:re[c.ext][0].path,fs_item:c}):$.set({path:"./programs/notepad.svelte",fs_item:c}):$.set({path:"./programs/my_computer.svelte",fs_item:c}),I()}function E(){r=this.value,e(3,r)}const x=()=>{e(5,_=null),e(6,k=null)};function F(c){K[c?"unshift":"push"](()=>{l=c,e(4,l)})}function C(c){K[c?"unshift":"push"](()=>{f=c,e(0,f)})}return u.$$set=c=>{"id"in c&&e(12,i=c.id),"window"in c&&e(0,f=c.window),"self"in c&&e(13,s=c.self),"parentNode"in c&&e(14,o=c.parentNode),"exec_path"in c&&e(15,a=c.exec_path),"options"in c&&e(2,N=c.options)},[f,I,N,r,l,_,k,m,P,W,G,y,i,s,o,a,E,x,F,C]}class Ue extends ie{constructor(t){super(),ae(this,t,Fe,Pe,fe,{id:12,window:0,self:13,parentNode:14,exec_path:15,destroy:1,options:2})}get id(){return this.$$.ctx[12]}set id(t){this.$$set({id:t}),R()}get window(){return this.$$.ctx[0]}set window(t){this.$$set({window:t}),R()}get self(){return this.$$.ctx[13]}set self(t){this.$$set({self:t}),R()}get parentNode(){return this.$$.ctx[14]}set parentNode(t){this.$$set({parentNode:t}),R()}get exec_path(){return this.$$.ctx[15]}set exec_path(t){this.$$set({exec_path:t}),R()}get destroy(){return this.$$.ctx[1]}get options(){return this.$$.ctx[2]}set options(t){this.$$set({options:t}),R()}}export{Ue as default};
