import{S as K,i as L,P as y,s as R,w as O,x as S,y as G,f as J,t as Q,B as Y,Y as T,o as U,l as v,a as W,r as V,m as k,n as I,c as q,u as j,h as D,Q as X,p as m,b as Z,J as a,v as tt,W as et}from"../../../chunks/index-70a5fc52.js";import{W as st}from"../../../chunks/Window-654de68f.js";import{B as it}from"../../../chunks/Button-e8580b92.js";import{r as nt,h as rt}from"../../../chunks/store-59feb90e.js";import{j as ot,h as at,g as A}from"../../../chunks/utils-1f7a3290.js";import{b as H}from"../../../chunks/fs-f48425c2.js";import{D as lt}from"../../../chunks/DumbProgress-0b7ff768.js";import"../../../chunks/TitleBar-5f961d1e.js";import"../../../chunks/lodash-b0811ec1.js";import"../../../chunks/_commonjsHelpers-cea7ac1a.js";import"../../../chunks/index-355ed6be.js";/* empty css                                                           */import"../../../chunks/index-f053a494.js";import"../../../chunks/finder-52261c48.js";import"../../../chunks/ProgressBar-f6d33f67.js";function ct(o){let t,i,n,s,l,c,_,d,h,b,C,u,P,E,N,g,F,e,f,p;return g=new lt({props:{style:"height:15px;margin:5px 0;flex-shrink:0;"}}),f=new it({props:{title:"Cancel",on_click:o[2]}}),{c(){t=v("div"),i=v("div"),n=v("div"),s=v("img"),c=W(),_=v("p"),d=V("Copying "),h=V(o[3]),b=V("..."),C=W(),u=v("p"),P=V("From host to "),E=V(o[4]),N=W(),O(g.$$.fragment),F=W(),e=v("div"),O(f.$$.fragment),this.h()},l(r){t=k(r,"DIV",{slot:!0,class:!0});var w=I(t);i=k(w,"DIV",{class:!0});var z=I(i);n=k(z,"DIV",{class:!0});var x=I(n);s=k(x,"IMG",{src:!0,width:!0,height:!0,alt:!0,class:!0}),c=q(x),_=k(x,"P",{class:!0});var B=I(_);d=j(B,"Copying "),h=j(B,o[3]),b=j(B,"..."),B.forEach(D),C=q(x),u=k(x,"P",{class:!0});var M=I(u);P=j(M,"From host to "),E=j(M,o[4]),M.forEach(D),N=q(x),S(g.$$.fragment,x),x.forEach(D),F=q(z),e=k(z,"DIV",{class:!0});var $=I(e);S(f.$$.fragment,$),$.forEach(D),z.forEach(D),w.forEach(D),this.h()},h(){X(s.src,l="/images/xp/copying.gif")||m(s,"src",l),m(s,"width","272"),m(s,"height","60"),m(s,"alt",""),m(s,"class","shrink-0"),m(_,"class","m-1 text-[12px] text-ellipsis line-clamp-1 h-4 shrink-0"),m(u,"class","m-1 text-[12px] text-ellipsis line-clamp-1 h-4 shrink-0"),m(n,"class","grow w-[270px] flex flex-col shrink-0 pr-1"),m(e,"class","flex flex-col justify-end w-[75px] shrink-0"),m(i,"class","absolute inset-2 flex flex-row overflow-hidden"),m(t,"slot","content"),m(t,"class","absolute inset-1 bg-xp-yellow")},m(r,w){Z(r,t,w),a(t,i),a(i,n),a(n,s),a(n,c),a(n,_),a(_,d),a(_,h),a(_,b),a(n,C),a(n,u),a(u,P),a(u,E),a(n,N),G(g,n,null),a(i,F),a(i,e),G(f,e,null),p=!0},p(r,w){(!p||w&8)&&tt(h,r[3])},i(r){p||(J(g.$$.fragment,r),J(f.$$.fragment,r),p=!0)},o(r){Q(g.$$.fragment,r),Q(f.$$.fragment,r),p=!1},d(r){r&&D(t),Y(g),Y(f)}}}function ft(o){let t,i,n={options:o[1],on_click_close:o[2],$$slots:{content:[ct]},$$scope:{ctx:o}};return t=new st({props:n}),o[11](t),{c(){O(t.$$.fragment)},l(s){S(t.$$.fragment,s)},m(s,l){G(t,s,l),i=!0},p(s,[l]){const c={};l&2&&(c.options=s[1]),l&32776&&(c.$$scope={dirty:l,ctx:s}),t.$set(c)},i(s){i||(J(t.$$.fragment,s),i=!0)},o(s){Q(t.$$.fragment,s),i=!1},d(s){o[11](null),Y(t,s)}}}function mt(o,t,i){let n;T(o,rt,e=>i(13,n=e));let{id:s}=t,{window:l}=t,{self:c}=t,{parentNode:_}=t,{copying_obj:d}=t,{target_folder_id:h}=t,{exec_path:b}=t,C=!1,u="",P=n[h].name,{options:E={title:"Copying",min_width:370,min_height:180,width:370,height:180,resizable:!1,minimize_btn:!1,maximize_btn:!1,id:s,exec_path:b}}=t;U(async()=>{if(d&&h){console.log(d);for(let e of Object.keys(d))console.log(e),await g(d[e],h,e);await N()}});async function N(){C=!0,nt.update(e=>e.filter(f=>f!=c)),c.$destroy()}async function g(e,f,p){if(!C)if(e instanceof File){i(3,u=e.name);let r=new File([e],e.name,{type:ot(e.name)||e.type});await H("file",A(p),at(p,A(p)),f,r)}else{let r=await H("folder","",p,f,null);for(let w of Object.keys(e))await g(e[w],r,w)}}function F(e){et[e?"unshift":"push"](()=>{l=e,i(0,l)})}return o.$$set=e=>{"id"in e&&i(5,s=e.id),"window"in e&&i(0,l=e.window),"self"in e&&i(6,c=e.self),"parentNode"in e&&i(7,_=e.parentNode),"copying_obj"in e&&i(8,d=e.copying_obj),"target_folder_id"in e&&i(9,h=e.target_folder_id),"exec_path"in e&&i(10,b=e.exec_path),"options"in e&&i(1,E=e.options)},[l,E,N,u,P,s,c,_,d,h,b,F]}class Nt extends K{constructor(t){super(),L(this,t,mt,ft,R,{id:5,window:0,self:6,parentNode:7,copying_obj:8,target_folder_id:9,exec_path:10,options:1,destroy:2})}get id(){return this.$$.ctx[5]}set id(t){this.$$set({id:t}),y()}get window(){return this.$$.ctx[0]}set window(t){this.$$set({window:t}),y()}get self(){return this.$$.ctx[6]}set self(t){this.$$set({self:t}),y()}get parentNode(){return this.$$.ctx[7]}set parentNode(t){this.$$set({parentNode:t}),y()}get copying_obj(){return this.$$.ctx[8]}set copying_obj(t){this.$$set({copying_obj:t}),y()}get target_folder_id(){return this.$$.ctx[9]}set target_folder_id(t){this.$$set({target_folder_id:t}),y()}get exec_path(){return this.$$.ctx[10]}set exec_path(t){this.$$set({exec_path:t}),y()}get options(){return this.$$.ctx[1]}set options(t){this.$$set({options:t}),y()}get destroy(){return this.$$.ctx[2]}}export{Nt as default};
