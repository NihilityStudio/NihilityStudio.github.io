import{S as fe,i as ce,s as ue,l as $,m as D,n as E,h as p,p as _,q as M,b as V,_ as me,K as H,E as C,M as N,N as ve,U as he,a as q,c as P,J as w,r as _e,u as de,v as pe,T as x,V as F,W as G,e as K,w as S,x as j,y as B,f as O,t as R,B as A,Z as ge,O as be,o as we,Y as ke}from"../../chunks/index-23b4510f.js";import Ee from"./task_bar.svelte-ee1955c2.js";import $e from"./work_space.svelte-96400a73.js";import{_ as L}from"../../chunks/preload-helper-c28b9807.js";import{e as De}from"../../chunks/utils-1f7a3290.js";import{c as U,h as Y,w as ye,q as Z}from"../../chunks/store-21632576.js";import"../../chunks/lodash-b0811ec1.js";import"../../chunks/index-5725e307.js";import{s as Q}from"../../chunks/index-355ed6be.js";import Ie from"./start_menu.svelte-e9500703.js";import Ve from"./welcome.svelte-2acd6819.js";import"./system_tray.svelte-3ad81fab.js";import"../../chunks/tooltip-f551ec3c.js";import"./program_tray.svelte-8bac4718.js";import"./wallpaper.svelte-fa20777d.js";import"../../chunks/index-5b24d155.js";import"../../chunks/_commonjsHelpers-cea7ac1a.js";import"./desktop_folder.svelte-cf6b3bdd.js";import"../../chunks/fs-93cd4a3b.js";import"../../chunks/finder-bfb6260e.js";import"../../chunks/dir_parser-92703b79.js";import"../../chunks/Previewable-2a157018.js";import"../../chunks/index-6533b345.js";function X(t,e,l){const o=t.slice();return o[13]=e[l],o[15]=l,o}function ee(t,e,l){const o=t.slice();return o[16]=e[l],o}function te(t,e,l){const o=t.slice();return o[16]=e[l],o}function le(t){let e,l,o,n=`${t[16].icon_size}px`,r=`${t[16].icon_size}px`;return{c(){e=$("img"),this.h()},l(s){e=D(s,"IMG",{src:!0,class:!0,alt:!0}),this.h()},h(){x(e.src,l=t[16].icon)||_(e,"src",l),_(e,"class",o="w-[17px] h-[17px] "+(t[16].icon_type=="monotone"?"group-hover:invert":"")+" "+(t[16].disabled&&t[16].icon_type=="monotone"?"contrast-50 invert":"")),_(e,"alt",""),M(e,"width",n,!1),M(e,"height",r,!1)},m(s,f){V(s,e,f)},p(s,f){f&2&&!x(e.src,l=s[16].icon)&&_(e,"src",l),f&2&&o!==(o="w-[17px] h-[17px] "+(s[16].icon_type=="monotone"?"group-hover:invert":"")+" "+(s[16].disabled&&s[16].icon_type=="monotone"?"contrast-50 invert":""))&&_(e,"class",o),f&2&&n!==(n=`${s[16].icon_size}px`)&&M(e,"width",n,!1),f&2&&r!==(r=`${s[16].icon_size}px`)&&M(e,"height",r,!1)},d(s){s&&p(e)}}}function se(t){let e,l;return{c(){e=F("svg"),l=F("path"),this.h()},l(o){e=G(o,"svg",{class:!0,xmlns:!0,viewBox:!0});var n=E(e);l=G(n,"path",{d:!0}),E(l).forEach(p),n.forEach(p),this.h()},h(){_(l,"d","M246.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-9.2-9.2-22.9-11.9-34.9-6.9s-19.8 16.6-19.8 29.6l0 256c0 12.9 7.8 24.6 19.8 29.6s25.7 2.2 34.9-6.9l128-128z"),_(e,"class","fill-slate-900 group-hover:fill-slate-50 w-[10px] h-[10px]"),_(e,"xmlns","http://www.w3.org/2000/svg"),_(e,"viewBox","0 0 256 512")},m(o,n){V(o,e,n),w(e,l)},d(o){o&&p(e)}}}function re(t){let e,l,o=`${t[4]>t[8]-2*t[3]?`-${(t[16].items.length-2)*100}%`:"0"}  `,n=t[16].items,r=[];for(let s=0;s<n.length;s+=1)r[s]=ie(te(t,n,s));return{c(){e=$("div");for(let s=0;s<r.length;s+=1)r[s].c();this.h()},l(s){e=D(s,"DIV",{class:!0});var f=E(e);for(let i=0;i<r.length;i+=1)r[i].l(f);f.forEach(p),this.h()},h(){_(e,"class",l="absolute "+(t[5]>t[7]-2*t[2]?"-left-full":"left-full")+" py-0.5 hidden group-hover:flex flex-col w-[180px] bg-slate-50 border-slate-200 border-2"),M(e,"top",o,!1)},m(s,f){V(s,e,f);for(let i=0;i<r.length;i+=1)r[i].m(e,null)},p(s,f){if(f&3){n=s[16].items;let i;for(i=0;i<n.length;i+=1){const a=te(s,n,i);r[i]?r[i].p(a,f):(r[i]=ie(a),r[i].c(),r[i].m(e,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=n.length}f&164&&l!==(l="absolute "+(s[5]>s[7]-2*s[2]?"-left-full":"left-full")+" py-0.5 hidden group-hover:flex flex-col w-[180px] bg-slate-50 border-slate-200 border-2")&&_(e,"class",l),f&282&&o!==(o=`${s[4]>s[8]-2*s[3]?`-${(s[16].items.length-2)*100}%`:"0"}  `)&&M(e,"top",o,!1)},d(s){s&&p(e),N(r,s)}}}function ze(t){let e;return{c(){e=$("div"),this.h()},l(l){e=D(l,"DIV",{class:!0}),E(e).forEach(p),this.h()},h(){_(e,"class","h-0.5 bg-slate-200 mx-1")},m(l,o){V(l,e,o)},p:C,d(l){l&&p(e)}}}function Me(t){let e,l,o,n,r,s=t[16].name+"",f,i,a,d,u,b,z;function m(y,g){if(y[16].icon)return Pe;if(y[16].check)return qe}let h=m(t),c=h&&h(t);function k(){return t[9](t[16])}return{c(){e=$("div"),l=$("div"),c&&c.c(),o=q(),n=$("div"),r=$("p"),f=_e(s),a=q(),d=$("div"),this.h()},l(y){e=D(y,"DIV",{class:!0});var g=E(e);l=D(g,"DIV",{class:!0});var v=E(l);c&&c.l(v),v.forEach(p),o=P(g),n=D(g,"DIV",{class:!0});var I=E(n);r=D(I,"P",{});var T=E(r);f=de(T,s),T.forEach(p),I.forEach(p),a=P(g),d=D(g,"DIV",{class:!0});var W=E(d);W.forEach(p),g.forEach(p),this.h()},h(){_(l,"class","w-[20px] ml-1 shrink-0 flex items-center justify-center"),_(n,"class",i="grow "+(t[16].font=="bold"?"font-bold":"")+" "+(t[16].disabled?"text-slate-400":"group-sub-hover:text-slate-50")),_(d,"class","w-[10px]"),_(e,"class",u="py-1 w-full flex flex-row items-center "+(t[16].disabled?"":"hover:bg-blue-600")+" relative group-sub "+(t[16].disabled?"pointer-events-none":""))},m(y,g){V(y,e,g),w(e,l),c&&c.m(l,null),w(e,o),w(e,n),w(n,r),w(r,f),w(e,a),w(e,d),b||(z=H(e,"click",k),b=!0)},p(y,g){t=y,h===(h=m(t))&&c?c.p(t,g):(c&&c.d(1),c=h&&h(t),c&&(c.c(),c.m(l,null))),g&2&&s!==(s=t[16].name+"")&&pe(f,s),g&2&&i!==(i="grow "+(t[16].font=="bold"?"font-bold":"")+" "+(t[16].disabled?"text-slate-400":"group-sub-hover:text-slate-50"))&&_(n,"class",i),g&2&&u!==(u="py-1 w-full flex flex-row items-center "+(t[16].disabled?"":"hover:bg-blue-600")+" relative group-sub "+(t[16].disabled?"pointer-events-none":""))&&_(e,"class",u)},d(y){y&&p(e),c&&c.d(),b=!1,z()}}}function qe(t){let e,l;return{c(){e=F("svg"),l=F("path"),this.h()},l(o){e=G(o,"svg",{class:!0,xmlns:!0,viewBox:!0});var n=E(e);l=G(n,"path",{d:!0}),E(l).forEach(p),n.forEach(p),this.h()},h(){_(l,"d","M256 512c141.4 0 256-114.6 256-256S397.4 0 256 0S0 114.6 0 256S114.6 512 256 512z"),_(e,"class","fill-slate-800 w-1.5 h-1.5 group-sub-hover:fill-slate-50"),_(e,"xmlns","http://www.w3.org/2000/svg"),_(e,"viewBox","0 0 512 512")},m(o,n){V(o,e,n),w(e,l)},p:C,d(o){o&&p(e)}}}function Pe(t){let e,l;return{c(){e=$("img"),this.h()},l(o){e=D(o,"IMG",{src:!0,width:!0,height:!0}),this.h()},h(){x(e.src,l=t[16].icon)||_(e,"src",l),_(e,"width","17px"),_(e,"height","17px")},m(o,n){V(o,e,n)},p(o,n){n&2&&!x(e.src,l=o[16].icon)&&_(e,"src",l)},d(o){o&&p(e)}}}function ie(t){let e;function l(r,s){return r[16]?Me:ze}let o=l(t),n=o(t);return{c(){n.c(),e=K()},l(r){n.l(r),e=K()},m(r,s){n.m(r,s),V(r,e,s)},p(r,s){o===(o=l(r))&&n?n.p(r,s):(n.d(1),n=o(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){n.d(r),r&&p(e)}}}function oe(t){let e,l,o,n,r,s=t[16].name+"",f,i,a,d,u,b,z,m,h=t[16].icon&&le(t),c=t[16].items!=null&&se(),k=t[16].items!=null&&re(t);function y(){return t[10](t[16])}return{c(){e=$("div"),l=$("div"),h&&h.c(),o=q(),n=$("div"),r=$("p"),f=_e(s),a=q(),d=$("div"),c&&c.c(),u=q(),k&&k.c(),this.h()},l(g){e=D(g,"DIV",{class:!0});var v=E(e);l=D(v,"DIV",{class:!0});var I=E(l);h&&h.l(I),I.forEach(p),o=P(v),n=D(v,"DIV",{class:!0});var T=E(n);r=D(T,"P",{});var W=E(r);f=de(W,s),W.forEach(p),T.forEach(p),a=P(v),d=D(v,"DIV",{class:!0});var J=E(d);c&&c.l(J),J.forEach(p),u=P(v),k&&k.l(v),v.forEach(p),this.h()},h(){_(l,"class","w-[20px] ml-1 shrink-0"),_(n,"class",i="grow "+(t[16].font=="bold"?"font-bold":"")+" "+(t[16].disabled?"text-slate-400":"group-hover:text-slate-50")),_(d,"class","w-[10px]"),_(e,"class",b="py-1 w-full flex flex-row items-center "+(t[16].disabled?"":"hover:bg-blue-600")+" relative group "+(t[16].disabled?"pointer-events-none":""))},m(g,v){V(g,e,v),w(e,l),h&&h.m(l,null),w(e,o),w(e,n),w(n,r),w(r,f),w(e,a),w(e,d),c&&c.m(d,null),w(e,u),k&&k.m(e,null),z||(m=H(e,"click",y),z=!0)},p(g,v){t=g,t[16].icon?h?h.p(t,v):(h=le(t),h.c(),h.m(l,null)):h&&(h.d(1),h=null),v&2&&s!==(s=t[16].name+"")&&pe(f,s),v&2&&i!==(i="grow "+(t[16].font=="bold"?"font-bold":"")+" "+(t[16].disabled?"text-slate-400":"group-hover:text-slate-50"))&&_(n,"class",i),t[16].items!=null?c||(c=se(),c.c(),c.m(d,null)):c&&(c.d(1),c=null),t[16].items!=null?k?k.p(t,v):(k=re(t),k.c(),k.m(e,null)):k&&(k.d(1),k=null),v&2&&b!==(b="py-1 w-full flex flex-row items-center "+(t[16].disabled?"":"hover:bg-blue-600")+" relative group "+(t[16].disabled?"pointer-events-none":""))&&_(e,"class",b)},d(g){g&&p(e),h&&h.d(),c&&c.d(),k&&k.d(),z=!1,m()}}}function ne(t){let e,l,o,n=t[13],r=[];for(let s=0;s<n.length;s+=1)r[s]=oe(ee(t,n,s));return{c(){e=$("div");for(let s=0;s<r.length;s+=1)r[s].c();l=q(),this.h()},l(s){e=D(s,"DIV",{class:!0});var f=E(e);for(let i=0;i<r.length;i+=1)r[i].l(f);l=P(f),f.forEach(p),this.h()},h(){_(e,"class",o="w-full border-slate-200 "+(t[15]==t[1].length-1?"":"border-b"))},m(s,f){V(s,e,f);for(let i=0;i<r.length;i+=1)r[i].m(e,null);w(e,l)},p(s,f){if(f&447){n=s[13];let i;for(i=0;i<n.length;i+=1){const a=ee(s,n,i);r[i]?r[i].p(a,f):(r[i]=oe(a),r[i].c(),r[i].m(e,l))}for(;i<r.length;i+=1)r[i].d(1);r.length=n.length}f&2&&o!==(o="w-full border-slate-200 "+(s[15]==s[1].length-1?"":"border-b"))&&_(e,"class",o)},d(s){s&&p(e),N(r,s)}}}function Te(t){let e,l,o=`${t[4]}px`,n=`${t[5]}px`,r,s,f=t[1].filter(ae),i=[];for(let a=0;a<f.length;a+=1)i[a]=ne(X(t,f,a));return{c(){e=$("div");for(let a=0;a<i.length;a+=1)i[a].c();this.h()},l(a){e=D(a,"DIV",{class:!0});var d=E(e);for(let u=0;u<i.length;u+=1)i[u].l(d);d.forEach(p),this.h()},h(){_(e,"class",l="context-menu z-20 pt-0.5 absolute border-2 border-slate-200 bg-slate-50 text-slate-900 w-[180px] text-[11px] "+(t[6]?"":"hidden")),M(e,"top",o,!1),M(e,"left",n,!1)},m(a,d){V(a,e,d);for(let u=0;u<i.length;u+=1)i[u].m(e,null);r||(s=[me(De.call(null,e)),H(e,"click_outside",t[11])],r=!0)},p(a,[d]){if(d&447){f=a[1].filter(ae);let u;for(u=0;u<f.length;u+=1){const b=X(a,f,u);i[u]?i[u].p(b,d):(i[u]=ne(b),i[u].c(),i[u].m(e,null))}for(;u<i.length;u+=1)i[u].d(1);i.length=f.length}d&64&&l!==(l="context-menu z-20 pt-0.5 absolute border-2 border-slate-200 bg-slate-50 text-slate-900 w-[180px] text-[11px] "+(a[6]?"":"hidden"))&&_(e,"class",l),d&16&&o!==(o=`${a[4]}px`)&&M(e,"top",o,!1),d&32&&n!==(n=`${a[5]}px`)&&M(e,"left",n,!1)},i:C,o:C,d(a){a&&p(e),N(i,a),r=!1,ve(s)}}}const ae=t=>t.length>0;function Se(t,e,l){let o=[],n=0,r=0,s=0,f=0,i=!1,a=700,d=700,u=U.subscribe(async c=>{if(c==null){l(6,i=!1);return}let{x:k,y,originator:g,type:v}=c;if(v==null)return;let I;v=="ProgramTile"?I=(await L(()=>import("../../chunks/CMProgramTile-5fefe8e4.js"),[])).make({type:v,originator:g}):v=="Desktop"?I=(await L(()=>import("../../chunks/CMDesktop-f9bb4b04.js"),["_app/immutable/chunks/CMDesktop-f9bb4b04.js","_app/immutable/chunks/store-21632576.js","_app/immutable/chunks/index-6533b345.js","_app/immutable/chunks/index-23b4510f.js","_app/immutable/chunks/fs-93cd4a3b.js","_app/immutable/chunks/utils-1f7a3290.js","_app/immutable/chunks/index-5b24d155.js","_app/immutable/chunks/_commonjsHelpers-cea7ac1a.js","_app/immutable/chunks/index-355ed6be.js","_app/immutable/chunks/finder-bfb6260e.js"])).make({type:v,originator:g}):v=="FSItem"?I=(await L(()=>import("../../chunks/CMFSItem-e85e932d.js"),["_app/immutable/chunks/CMFSItem-e85e932d.js","_app/immutable/chunks/preload-helper-c28b9807.js","_app/immutable/chunks/store-21632576.js","_app/immutable/chunks/index-6533b345.js","_app/immutable/chunks/index-23b4510f.js","_app/immutable/chunks/utils-1f7a3290.js","_app/immutable/chunks/fs-93cd4a3b.js","_app/immutable/chunks/index-5b24d155.js","_app/immutable/chunks/_commonjsHelpers-cea7ac1a.js","_app/immutable/chunks/index-355ed6be.js","_app/immutable/chunks/finder-bfb6260e.js"])).make({type:v,originator:g}):v=="FSVoid"?I=(await L(()=>import("../../chunks/CMFSVoid-50ac174d.js"),["_app/immutable/chunks/CMFSVoid-50ac174d.js","_app/immutable/chunks/store-21632576.js","_app/immutable/chunks/index-6533b345.js","_app/immutable/chunks/index-23b4510f.js","_app/immutable/chunks/fs-93cd4a3b.js","_app/immutable/chunks/utils-1f7a3290.js","_app/immutable/chunks/index-5b24d155.js","_app/immutable/chunks/_commonjsHelpers-cea7ac1a.js","_app/immutable/chunks/index-355ed6be.js","_app/immutable/chunks/finder-bfb6260e.js"])).make({type:v,originator:g}):v=="RecycleBin"?I=(await L(()=>import("../../chunks/RecycleBin-90aa999d.js"),["_app/immutable/chunks/RecycleBin-90aa999d.js","_app/immutable/chunks/preload-helper-c28b9807.js","_app/immutable/chunks/store-21632576.js","_app/immutable/chunks/index-6533b345.js","_app/immutable/chunks/index-23b4510f.js","_app/immutable/chunks/fs-93cd4a3b.js","_app/immutable/chunks/utils-1f7a3290.js","_app/immutable/chunks/index-5b24d155.js","_app/immutable/chunks/_commonjsHelpers-cea7ac1a.js","_app/immutable/chunks/index-355ed6be.js","_app/immutable/chunks/finder-bfb6260e.js"])).make({type:v,originator:g}):console.log("unknown context menu type"),l(1,o=I.menu),l(2,n=I.required_width),l(3,r=I.required_height),l(7,a=document.body.offsetWidth),l(8,d=document.body.offsetHeight),l(5,f=Math.min(k,a-n)),l(4,s=Math.min(y,d-r)),l(6,i=!0)});he(()=>{u()});let{hide:b=()=>{l(6,i=!1),U.set(null)}}=e;const z=c=>{c.disabled||(b(),c.action())},m=c=>{if(!c.disabled){if(c.items!=null)return;b(),c.action()}},h=()=>b();return t.$$set=c=>{"hide"in c&&l(0,b=c.hide)},[b,o,n,r,s,f,i,a,d,z,m,h]}class je extends fe{constructor(e){super(),ce(this,e,Se,Te,ue,{hide:0})}}function Be(t){let e,l,o,n,r,s,f,i,a,d,u,b;o=new $e({}),r=new Ee({}),f=new Ie({}),a=new je({});let z={};return u=new Ve({props:z}),t[1](u),{c(){e=$("div"),l=$("div"),S(o.$$.fragment),n=q(),S(r.$$.fragment),s=q(),S(f.$$.fragment),i=q(),S(a.$$.fragment),d=q(),S(u.$$.fragment),this.h()},l(m){e=D(m,"DIV",{id:!0,class:!0});var h=E(e);l=D(h,"DIV",{class:!0});var c=E(l);j(o.$$.fragment,c),c.forEach(p),n=P(h),j(r.$$.fragment,h),s=P(h),j(f.$$.fragment,h),i=P(h),j(a.$$.fragment,h),h.forEach(p),d=P(m),j(u.$$.fragment,m),this.h()},h(){_(l,"class","absolute z-0 left-0 right-0 top-0 bottom-[30px]"),_(e,"id","desktop"),_(e,"class","absolute inset-0 p-0")},m(m,h){V(m,e,h),w(e,l),B(o,l,null),w(e,n),B(r,e,null),w(e,s),B(f,e,null),w(e,i),B(a,e,null),V(m,d,h),B(u,m,h),b=!0},p(m,[h]){const c={};u.$set(c)},i(m){b||(O(o.$$.fragment,m),O(r.$$.fragment,m),O(f.$$.fragment,m),O(a.$$.fragment,m),O(u.$$.fragment,m),b=!0)},o(m){R(o.$$.fragment,m),R(r.$$.fragment,m),R(f.$$.fragment,m),R(a.$$.fragment,m),R(u.$$.fragment,m),b=!1},d(m){m&&p(e),A(o),A(r),A(f),A(a),m&&p(d),t[1](null),A(u,m)}}}function Oe(t,e,l){let o;ge(t,Y,a=>l(3,o=a));let n=be(),r,s=[Y.subscribe(async a=>{clearInterval(r),r=setTimeout(async()=>{console.log("update hardDrive"),await Q("hard_drive",o)},1e3)}),ye.subscribe(async a=>{a!=null&&await Q("wallpaper",a)}),Z.subscribe(a=>{if(a!=null&&a!="")switch(a){case"shutdown":n("load_page",{url:"./xp/shutdown.svelte"}),Z.set(null);break;case"restart":n("load_page",{url:"./xp/shutdown.svelte"});break}})],f;we(async()=>{loadjs(["https://www.gstatic.com/charts/loader.js","/js/mammoth.browser.min.js","https://unpkg.com/panzoom@9.4.0/dist/panzoom.min.js","https://unpkg.com/@ruffle-rs/ruffle"]),l(0,f.self=f,f)}),he(()=>{for(let a of s)a();clearInterval(r)});function i(a){ke[a?"unshift":"push"](()=>{f=a,l(0,f)})}return[f,i]}class ot extends fe{constructor(e){super(),ce(this,e,Oe,Be,ue,{})}}export{ot as default};
